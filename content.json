{"meta":{"title":"clock","subtitle":"","description":"","author":"John Doe","url":"https://ljweb.xyz","root":"/"},"pages":[{"title":"404 Not Found","date":"2022-02-16T14:10:43.372Z","updated":"2022-02-16T14:10:43.372Z","comments":false,"path":"/404.html","permalink":"https://ljweb.xyz/404.html","excerpt":"","text":":love_letter:TEST:æ–°å»ºæ–‡ç« "},{"title":"å…³äº","date":"2022-02-16T14:10:43.468Z","updated":"2022-02-16T14:10:43.468Z","comments":false,"path":"about/index.html","permalink":"https://ljweb.xyz/about/index.html","excerpt":"","text":""},{"title":"ä¹¦å•","date":"2022-02-16T14:10:43.468Z","updated":"2022-02-16T14:10:43.468Z","comments":false,"path":"books/index.html","permalink":"https://ljweb.xyz/books/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2022-02-16T14:10:43.468Z","updated":"2022-02-16T14:10:43.468Z","comments":false,"path":"categories/index.html","permalink":"https://ljweb.xyz/categories/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2022-02-16T14:10:43.472Z","updated":"2022-02-16T14:10:43.472Z","comments":true,"path":"links/index.html","permalink":"https://ljweb.xyz/links/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2022-02-16T14:10:43.472Z","updated":"2022-02-16T14:10:43.472Z","comments":false,"path":"repository/index.html","permalink":"https://ljweb.xyz/repository/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2022-02-16T14:10:43.472Z","updated":"2022-02-16T14:10:43.472Z","comments":false,"path":"tags/index.html","permalink":"https://ljweb.xyz/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"51å•ç‰‡æœºçš„å»¶æ—¶å‡½æ•°","slug":"51å•ç‰‡æœºçš„å»¶æ—¶å‡½æ•°","date":"2022-01-10T04:20:30.000Z","updated":"2022-02-16T14:10:43.384Z","comments":true,"path":"2022/01/10/51å•ç‰‡æœºçš„å»¶æ—¶å‡½æ•°/","link":"","permalink":"https://ljweb.xyz/2022/01/10/51%E5%8D%95%E7%89%87%E6%9C%BA%E7%9A%84%E5%BB%B6%E6%97%B6%E5%87%BD%E6%95%B0/","excerpt":"","text":"å‚è€ƒï¼š 51å•ç‰‡æœºçš„å»¶æ—¶è®¡ç®—_æµ·è‰æµ·è‰çš„åšå®¢-CSDNåšå®¢_å•ç‰‡æœºdelayå»¶æ—¶æ—¶é—´æ€ä¹ˆç®— æ–¹æ³•ï¼š1.ä½¿ç”¨STC-ISPè½¯ä»¶ä¸­çš„è½¯ä»¶å»¶æ—¶è®¡ç®—å™¨(åªèƒ½ç”Ÿæˆå›ºå®šæ—¶é—´çš„å‡½æ•°)","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://ljweb.xyz/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"51å•ç‰‡æœº","slug":"51å•ç‰‡æœº","permalink":"https://ljweb.xyz/tags/51%E5%8D%95%E7%89%87%E6%9C%BA/"}]},{"title":"2021ç”µèµ›æ€»ç»“","slug":"2021ç”µèµ›æ€»ç»“","date":"2021-12-13T15:10:08.000Z","updated":"2022-02-16T14:10:43.372Z","comments":true,"path":"2021/12/13/2021ç”µèµ›æ€»ç»“/","link":"","permalink":"https://ljweb.xyz/2021/12/13/2021%E7%94%B5%E8%B5%9B%E6%80%BB%E7%BB%93/","excerpt":"","text":"æŒ«æŠ˜ä¹‹åçš„æˆé•¿&emsp;&emsp;2021å¹´çš„ç”µèµ›è¿‡å»è¿‘ä¸¤ä¸ªæœˆäº†ï¼Œè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å‚åŠ ç”µèµ›ï¼Œè™½ç„¶æœ€åæ²¡èƒ½å®Œèµ›ï¼ˆæˆ‘å¤ªèœå•¦ï¼ï¼‰ä½†æ˜¯ç»è¿‡è¿™æ¬¡çš„ç”µèµ›çš„ç»å†ä¹Ÿè®©æˆ‘è®¤è¯†åˆ°äº†å’Œå¤§ä½¬çš„å·®è·å’Œè‡ªèº«çš„ä¸è¶³ã€‚ä¹Ÿè®©æˆ‘å½»åº•çˆ±ä¸Šäº†è¿™ç§å­¦ä¹ ã€è®¾è®¡ï¼Œåˆ¶ä½œã€å¤´è„‘é£æš´çš„æ„Ÿè§‰ã€‚å¸Œæœ›è‡ªå·±èƒ½è®°ä½è¿™æ¬¡çš„å¤±åˆ©ï¼Œè®°ä½è¿™è½å·®ã€‚ä¸ä¼šè¢«ä¸€æ—¶çš„æŒ«æŠ˜è€ŒæŠ¹æ€ä¸“æ³¨å’Œçƒ­çˆ±ï¼Œä»¥åå¥½å¥½ç©ä¸”ç©å¥½ï¼ èµ›é¢˜åˆ†æ&emsp;&emsp;æˆ‘ä»¬ç»„é€‰æ‹©çš„æ˜¯Fé¢˜ï¼šåšä¸€ä¸ªé€è¯å°è½¦ï¼ŒåŸºç¡€é¢˜ä¸€å…±æœ‰ä¸‰ä¸ªä»»åŠ¡ï¼ˆå› ä¸ºæ˜¯ç¬¬ä¸€æ¬¡å‚åŠ ç”µèµ›æˆ‘ä»¬å°±å¥”ç€åŸºç¡€é¢˜å»äº†ï¼‰ï¼Œå°è½¦å…ˆè¦åœ¨èµ·ç‚¹è¯†åˆ«å‡ºç»™å®šçš„æ•°å­—ï¼ˆæ•°å­—æ‰“å°åœ¨çº¸ä¸Šï¼‰ï¼Œå–åˆ°è¯å“åå¾ªè¿¹å»æ•°å­—å¯¹åº”çš„è¯æˆ¿ï¼Œç„¶åç­‰å¾…è¯å“å¸è´§ï¼Œæœ€åè‡ªä¸»è¿”å›èµ·ç‚¹ã€‚ &emsp;&emsp;4å·æ—©ä¸Šé¢˜ç›®å‡ºæ¥åï¼Œæˆ‘å’Œé˜Ÿå‘˜ä»¬ä¸€æ—¶éƒ½å‚»äº†çœ¼ï¼å› ä¸ºæˆ‘ä»¬éƒ½æ˜¯å¤§äºŒçš„åŒå­¦ï¼Œå¦‚æœæ­¤æ¬¡ç”µèµ›ä¸æ¨è¿Ÿåˆ°11æœˆçš„è¯ï¼Œæˆ‘ä»¬é˜Ÿä¼ç”šè‡³æ‰å¤§ä¸€ï¼Œæˆ‘ä»¬è°éƒ½æ²¡æœ‰åšè¿™ä¹ˆéš¾é¡¹ç›®çš„ç»éªŒã€‚å®ä¸ç›¸ç’ï¼Œä»¥æˆ‘ä»¬å›¢é˜Ÿç›®å‰çš„æ°´å¹³åªèƒ½å†™ä¸ª51å•ç‰‡æœºï¼Œå½“æ—¶äº”æœˆä»½æŠ¥åå‚åŠ ç”µèµ›çš„æ—¶å€™ä¹Ÿæ˜¯æŠ±ç€è§ä¸–é¢å»è¯•ä¸€è¯•çš„ï¼Œè€Œå‚åŠ è¿™æ¬¡æ¯”èµ›çš„å­¦é•¿ä»¬ï¼Œä¹Ÿéƒ½æ”¾å¼ƒäº†ä»¥å¾€ç›¸å¯¹ç®€å•çš„ä½†ä»Šå¹´éš¾åº¦ä¸Šå¤©çš„å°è½¦é¢˜ï¼ˆå½“ç„¶å…¶ä»–ç»„çš„é¢˜ç›®ä¹Ÿä¸å¥½åšï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬é¢å¯¹çš„æƒ…å†µå°±æ˜¯ï¼Œå…¨æ ¡å°±ä¸¤ç»„åœ¨åšå°è½¦é¢˜ï¼ˆå¦ä¸€ç»„ä¹Ÿæ˜¯å’Œæˆ‘ä»¬ä¸€æ ·ï¼Œå¤§äºŒï¼Œæ²¡æœ‰ç›¸å…³ç»éªŒï¼‰ã€‚ ç”µèµ›Fé¢˜çš„éš¾ç‚¹ï¼š1.å¾ªè¿¹ï¼š &emsp;&emsp;æˆ‘åšè¿‡ä¸€ä¸ªç”¨çº¢å¤–æ¥å¾ªè¿¹çš„51å°è½¦ï¼Œä½†æ˜¯é¢˜ç›®ä¸ºäº†å¢å¤§éš¾åº¦ï¼Œå¦‚å›¾ï¼Œè½¨é“ä¸­é—´çš„çº¿æ˜¯çº¢è‰²çš„ï¼ˆå› ä¸ºçº¢è‰²å’Œèµ›é“èƒŒæ™¯çš„ç™½è‰²åå·®ä¸åƒé»‘è‰²å’Œç™½è‰²é‚£æ ·å¤§ğŸ˜­ï¼‰ï¼Œæ‰€ä»¥ç”¨ä¸äº†çº¢å¤–çš„æ–¹æ¡ˆã€‚è¿™ä¸‹æˆ‘ä»¬æƒ³åˆ°çš„å°±æ˜¯ä½¿ç”¨OpenMvè¿›è¡Œè§†è§‰å¾ªè¿¹ï¼ˆå…¶å®ä¹Ÿå¯ä»¥ç”¨ç°åº¦ä¼ æ„Ÿå™¨ï¼ï¼‰ï¼Œå¯æ˜¯æˆ‘ä»¬ä»æ¥æ²¡æ¥è§¦è¿‡OpenMvï¼Œåªèƒ½ç°å­¦ç°åšï¼Œè¿˜å¥½æˆ‘ä»ä¸€ä¸ªåšæ— äººæœºç»„çš„å­¦é•¿é‚£é‡Œå€Ÿæ¥äº†ä¸€ä¸ªOpenMvï¼Œè¿™è®©æˆ‘èƒ½é¢˜ç›®ç¡®å®šä¹‹åç«‹é©¬å¼€å§‹å­¦ä¹ OpenMvã€‚ç„¶åè€å¸ˆä¹Ÿå¸®æˆ‘ä»¬ä¹°äº†æ–°çš„OpenMvæ¨¡å—ï¼Œè§£å†³äº†ç‡ƒçœ‰ä¹‹æ€¥ã€‚ &emsp;&emsp;åœ¨æˆ‘å¼€å§‹å­¦ä¹ OpenMvçš„æ—¶å€™ï¼Œå¦å¤–ä¸€åé˜Ÿå‹åœ¨åšå°è½¦çš„ç¡¬ä»¶éƒ¨åˆ†ï¼Œå› ä¸ºå®éªŒå®¤æœ‰å¾ˆå¤šå››é©±å°è½¦çš„è½¦æ¨¡ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€åå°±é‡‡ç”¨äº†ã€‚ &emsp;&emsp;æˆ‘ä»¬ç”¨çš„æ˜¯Arduino unoå½“ä¸‹ä½æœºï¼ŒåŸå› æ˜¯arduinoæ¯”è¾ƒç®€å•ï¼Œç¨‹åºå¾ˆå¥½å†™ï¼Œæˆ‘å½“æ—¶çš„æƒ³æ³•æ˜¯ä¿¡æ¯å¤„ç†å’Œç”µæœºåŠ¨ä½œæ§åˆ¶éƒ½åœ¨OpenMvä¸Šåšï¼Œarduinoåªç”¨æ¥è¿›è¡Œç®€å•çš„æ”¶åˆ°ä¸²å£é€šè®¯æŒ‡ä»¤åæ§åˆ¶ç”µæœºå’Œä¸¤ä¸ªLEDç¯ã€‚ &emsp;&emsp;çº¢çº¿å¾ªè¿¹çš„éƒ¨åˆ†æˆ‘ç¬¬äºŒå¤©å®ç°äº†ï¼Œä¹Ÿèƒ½è¯†åˆ«å‡ºåå­—è·¯å£ï¼Œç„¶ååœä¸‹ã€‚ 2.æ•°å­—è¯†åˆ«ï¼š &emsp;&emsp;æ•°å­—è¯†åˆ«æˆ‘ä¹Ÿç”¨çš„æ˜¯OpenMvçš„æ¨¡æ¿åŒ¹é…ï¼Œè¯†åˆ«æ•ˆæœè¿˜è¡Œï¼Œå°±æ˜¯å¯¹å°è½¦çš„è§’åº¦å’Œè·ç¦»éƒ½æ¯”è¾ƒé«˜ï¼Œä½†æ˜¯æ²¡åŠæ³•ï¼Œæ¯”èµ›å·²ç»åˆ°ç¬¬äºŒå¤©äº†ï¼Œå†ä¹°å…ƒä»¶å·²ç»æ¥ä¸åŠäº†ï¼Œåªèƒ½ç¡¬ç€å¤´çš®åšä¸‹å»ã€‚ &emsp;&emsp;æ•°å­—è¯†åˆ«åœ¨ç¬¬ä¸‰å¤©çš„æœ€åä¹Ÿåšå¾—å·®ä¸å¤šäº†ï¼Œåˆ°è¿™é‡Œï¼Œå°è½¦å·²ç»èƒ½ä»èµ·ç‚¹å‡ºå‘ï¼Œå¾ªè¿¹æ‰¾åˆ°åå­—è·¯å£åï¼Œåœä¸‹æ¥è¿›è¡Œè¯†åˆ«äº†ï¼Œæˆ–è€…è¿›è¡Œè½¬å¼¯ã€‚ä¸¤å¤©å†…ä»0å¼€å§‹å­¦ä¹ åˆ°èƒ½è¯†åˆ«åˆ°æ•°å­—è¿˜æ˜¯å¾ˆæ¿€åŠ¨çš„ï¼Œè¿™å¾—ç›ŠäºOpenMvå¥½ä¸Šæ‰‹çš„ç‰¹æ€§ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘å½“åˆé€‰æ‹©OpenMvçš„åŸå› ã€‚å¯ä¹Ÿå¸¦æ¥å¾ˆå¤§å¼Šç«¯ï¼Œå› ä¸ºæˆ‘ä»æ¥æ²¡æœ‰å­¦è¿‡pythonï¼Œåé¢é€»è¾‘éƒ¨åˆ†æ²¡æœ‰äº†å†ç¨‹çš„æ”¯æŒæˆ‘å°±é‡åˆ°å¤§é—®é¢˜äº†ã€‚ æœ€åè¿˜åœ¨å†™ä»£ç çš„è€èƒ¡ï¼ˆè¯·å¿½ç•¥æˆ‘ä»¬å¾ˆä¹±çš„å®éªŒå®¤ ğŸ˜‚ ï¼‰ 3.é€»è¾‘&emsp;&emsp;èµ›é¢˜è¦æ±‚ä¸€å¥—ä»£ç è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œå¯¹æ²¡ä»€ä¹ˆç»éªŒçš„æˆ‘æ¥è¯´ï¼Œè¿™éš¾åº¦æ¯”ä¸Šå¤©è¿˜éš¾ï¼Œå› ä¸ºæˆ‘ä»¬åªæœ‰OpenMvï¼Œæ‰€ä»¥åªèƒ½åœ¨ä¸Šé¢åˆè·‘å¾ªè¿¹åˆè·‘æ•°å­—è¯†åˆ«ï¼Œé€»è¾‘å°±å¾ˆéš¾å†™ï¼Œè™½ç„¶æˆ‘ä»¬é˜Ÿä¼é‡Œé¢æœ‰ä¸€ä½è®¡ç®—æœºçš„åŒå­¦ï¼Œä»–å­¦è¿‡pythonï¼Œä½†ç”±äºæˆ‘ä»¬éƒ½æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦OpenMvï¼Œåœ¨æœ€åæˆ‘ç†¬äº†ä¸€æ™šä¸Šï¼Œç™½å¤©åˆæˆ˜æ–—äº†æœ€ååå‡ å°æ—¶ä¹‹åï¼Œæˆ‘ä»¬è¿˜æ˜¯å¤±è´¥äº†ã€‚ æ€»ç»“&emsp;&emsp;å…¶å®ä¸éš¾å‘ç°ï¼Œæˆ‘ä»¬è¿™æ¬¡çš„å¤±è´¥æ˜¯å¿…ç„¶çš„ã€‚å› ä¸ºå›¢é˜Ÿé‡Œé¢æ²¡æœ‰ä¸€ä¸ªäººæœ‰å­¦è¿‡è¿™äº›çŸ¥è¯†ï¼ŒçŸ¥è¯†å‚¨å¤‡ä¸è¶³æ˜¯ä¸€æ–¹é¢ã€‚è¿˜æœ‰é˜Ÿå‘˜çš„ä»»åŠ¡åˆ†é…ä¹Ÿå‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œç”µèµ›æ˜¯ä¸‰äººä¸€ç»„ï¼Œæˆ‘ä»¬å½“æ—¶çš„åˆ†é…æ˜¯ä¸€ä¸ªäººè´Ÿè´£æ‰“æ‚å’Œå†™è®¾è®¡æŠ¥å‘Šï¼Œå¦å¤–ä¸¤ä¸ªä¸€ä¸ªè´Ÿè´£æ•´ä¸ªé¡¹ç›®çš„åˆ¶ä½œéƒ¨åˆ†ã€‚å› ä¸ºé€‰æ‹©çš„é¢˜ç›®å¯¹æˆ‘ä»¬æ¥è¯´å¤ªéš¾ï¼Œé™¤äº†æˆ‘å­¦ä¹ äº†ç‚¹OpenMvä¹‹å¤–ï¼Œå¦å¤–ä¸¤åé˜Ÿå‘˜æ²¡èƒ½å‚ä¸è¿›æ¥ï¼Œå¯¼è‡´åˆ†å·¥ä¸åˆç†ã€‚ &emsp;&emsp;ä½†æˆ‘è¿˜æ˜¯è§‰å¾—èƒ½å‚åŠ è¿™æ ·çš„æ¯”èµ›ï¼Œå¾ˆå€¼å¾—ï¼Œæ¯”èµ›çš„è¿‡ç¨‹å¾ˆè¿‡ç˜¾ï¼Œç‰¹åˆ«æ˜¯è§£å†³ä¸€ä¸ªåˆä¸€ä¸ªé—®é¢˜çš„è¿‡ç¨‹ã€‚è¿™è®©æˆ‘æ›´åŠ æœ‰åŠ¨åŠ›å»å­¦ä¹ ï¼Œè¡¥ç¼ºè¡¥å·®ã€‚æ˜å¹´çš„æ¯”èµ›æˆ‘ä»¬è¿˜ä¼šå‚åŠ çš„ï¼ æ„Ÿè°¢&emsp;&emsp;â¤ï¸çœŸçš„å¾ˆæ„Ÿè°¢æ¯”èµ›ä¸­å­¦æ ¡å’Œè€å¸ˆä»¬çš„å¸®åŠ©ï¼Œä¹Ÿå¾ˆæ„Ÿè°¢å¥½é˜Ÿå‹ç»™æˆ‘å¸¦é¥­ï¼Œèƒ½è®©æˆ‘é€‰æ‹©å›°éš¾çš„é¢˜ç›®æŒ‘æˆ˜è‡ªå·±ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://ljweb.xyz/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"OpenMv","slug":"OpenMv","permalink":"https://ljweb.xyz/tags/OpenMv/"}]},{"title":"ä½¿ç”¨51å•ç‰‡æœºé©±åŠ¨èœ‚é¸£å™¨æ’­æ”¾éŸ³ä¹","slug":"ä½¿ç”¨51å•ç‰‡æœºé©±åŠ¨èœ‚é¸£å™¨æ’­æ”¾éŸ³ä¹","date":"2021-11-29T15:49:50.000Z","updated":"2022-02-16T14:10:43.384Z","comments":true,"path":"2021/11/29/ä½¿ç”¨51å•ç‰‡æœºé©±åŠ¨èœ‚é¸£å™¨æ’­æ”¾éŸ³ä¹/","link":"","permalink":"https://ljweb.xyz/2021/11/29/%E4%BD%BF%E7%94%A851%E5%8D%95%E7%89%87%E6%9C%BA%E9%A9%B1%E5%8A%A8%E8%9C%82%E9%B8%A3%E5%99%A8%E6%92%AD%E6%94%BE%E9%9F%B3%E4%B9%90/","excerpt":"","text":"å‚è€ƒï¼šhttps://blog.csdn.net/m0_37697335/article/details/84915995 æœ‰æºèœ‚é¸£å™¨ä¸æ— æºèœ‚é¸£å™¨çš„åŒºåˆ«æ— æºèœ‚é¸£å™¨çš„ç‰¹ç‚¹æ˜¯ï¼š1ã€ æ— æºå†…éƒ¨ä¸å¸¦éœ‡è¡æºï¼Œæ‰€ä»¥å¦‚æœç”¨ç›´æµä¿¡å·æ— æ³•ä»¤å…¶é¸£å«ã€‚å¿…é¡»ç”¨2K~5Kçš„æ–¹æ³¢ï¼ˆå»ºè®®ä½¿ç”¨PWMï¼‰å»é©±åŠ¨å®ƒ 2ã€ å£°éŸ³é¢‘ç‡å¯æ§ï¼Œå¯ä»¥åšå‡ºâ€œå¤šæ¥ç±³å‘ç´¢æ‹‰è¥¿â€çš„æ•ˆæœã€‚ 3ã€ å¯ä»¥ä½¿å‘ˆç°çš„å‘éŸ³æ•ˆæœæ›´ä¸°å¯Œï¼Œå½“ç„¶æ§åˆ¶æ–¹å¼ä¹Ÿå› æ­¤å˜å¾—æ¯”æœ‰æºèœ‚é¸£å™¨æ›´å¤æ‚ä¸€ç‚¹ã€‚ æœ‰æºèœ‚é¸£å™¨çš„ç‰¹ç‚¹æ˜¯ï¼š1 ã€æœ‰æºèœ‚é¸£å™¨å†…éƒ¨å¸¦éœ‡è¡æºï¼Œæ‰€ä»¥åªè¦ä¸€é€šç”µå°±ä¼šå«2ã€ ç¨‹åºæ§åˆ¶æ–¹ä¾¿ï¼Œå•ç‰‡æœºä¸€ä¸ªé«˜ä½ç”µå¹³å°±å¯ä»¥è®©å…¶å‘å‡ºå£°éŸ³ï¼Œè€Œæ— æºèœ‚é¸£å™¨å´åšä¸åˆ°ã€‚ 3ã€ æ•ˆæœå•ä¸€ï¼Œä½†æ˜¯æ§åˆ¶ç®€å•ï¼Œå¦‚æœä»…æ˜¯ä½œä¸ºå•ä¸€æ— å˜åŒ–çš„æç¤ºéŸ³ä½¿ç”¨ï¼Œæœ‰æºèœ‚é¸£å™¨æ— ç–‘æ˜¯ä¸€ç§å¥½é€‰æ‹©ã€‚ å‚è€ƒä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106#include &lt;reg52.h&gt;#define RldTmr(fr) 65536 - (11059200 / 12) / (fr &lt;&lt; 1)#define FuDian(n) (n &lt;&lt; 1) / 3 //é™„ç‚¹nåˆ†éŸ³ç¬¦çš„æ¢ç®— typedef unsigned char UCHAR;typedef unsigned int UINT;typedef unsigned long ULONG; sbit BUZZ = P0^0; UINT code noteFreq[] = &#123; //ä¸­éŸ³ 1-7 å’Œé«˜éŸ³ 1-7å¯¹åº”çš„é¢‘ç‡åˆ—è¡¨ 523, 587, 659, 698, 784, 880, 988, 1047, 1175, 1319, 1397, 1568, 1760, 1976&#125;;UINT code tmrRld[] = &#123; //ä¸­éŸ³ 1-7 å’Œé«˜éŸ³ 1-7å¯¹åº”çš„å®šæ—¶å™¨é‡è½½å€¼ RldTmr(523), RldTmr(587), RldTmr(659), RldTmr(698), RldTmr(784), RldTmr(880), RldTmr(988), RldTmr(1047), RldTmr(1175), RldTmr(1319), RldTmr(1397), RldTmr(1568), RldTmr(1760), RldTmr(1976),&#125;;UCHAR code musicNote[] = &#123; //éŸ³å 1, 2, 3, 1, 1, 2, 3, 1, 3, 4, 5, 3, 4, 5, 5, 6, 5, 4, 3, 1, 5, 6, 5, 4, 3, 1, 1, 5, 1, 1, 5, 1&#125;;UCHAR code noteDuration[] = &#123; //éŸ³åå¯¹åº”çš„æ—¶å€¼ï¼Œ4è¡¨ç¤º4åˆ†éŸ³ç¬¦ï¼Œ8è¡¨ç¤º8åˆ†éŸ³ç¬¦ï¼Œ16è¡¨ç¤º16åˆ†éŸ³ç¬¦ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 2, 4, 4, 2, FuDian(8), 16, FuDian(8), 16, 4, 4, FuDian(8), 16, FuDian(8), 16, 4, 4, 4, 4, 2, 4, 4, 2&#125;;bit enable = 1, tmrFlg = 0;UCHAR T0RH = 0XFF, T0RL = 0X00; void Delay(UINT n);void PlayMusic(UCHAR speed); //å›ºå®šæ ‡å‡†ä¸º4åˆ†éŸ³ç¬¦çš„é€Ÿåº¦ï¼šä¾‹å¦‚speed = 108 è¡¨ç¤ºä¸€åˆ†é’Ÿæ‰«è¿‡108ä¸ª4åˆ†éŸ³ç¬¦ void main() &#123; EA = 1; TMOD = 0X01; TH0 = T0RH; TL0 = T0RL; ET0 = 1; TR0 = 1; while (1) &#123; PlayMusic(72); Delay(40000u); &#125;&#125; void Delay(UINT n) &#123; UINT i; for (i = 0; i &lt; n; i++) ;&#125; void PlayMusic(UCHAR speed) &#123; UCHAR i; UCHAR idx; UINT cnt = 0; UINT durationCnt = 0; //å½“å‰éŸ³ç¬¦çš„æ—¶å€¼å¯¹åº”çš„å®šæ—¶å™¨è®¡æ•° UINT soundCnt = 0; //å½“å‰éŸ³ç¬¦çš„å‘å£°æ—¶å€¼å¯¹åº”çš„è®¡æ•°å€¼ for (i = 0; i &lt; sizeof (musicNote); ) &#123; while (!tmrFlg) ; tmrFlg = 0; if (cnt == 0) &#123; idx = musicNote[i] - 1; T0RH = tmrRld[idx] &gt;&gt; 8; T0RL = tmrRld[idx]; durationCnt = (ULONG)240 * (ULONG)noteFreq[idx] / ((ULONG)noteDuration[i] * (ULONG)speed); soundCnt = durationCnt - (durationCnt &gt;&gt; 2); //å½“å‰éŸ³ç¬¦æ—¶å€¼çš„å‰3/4å‘å£°ï¼Œå1/4é™éŸ³ enable = 1; cnt++; &#125; else &#123; if (cnt == durationCnt) &#123; cnt = 0; i++; &#125; else &#123; cnt++; if (cnt == soundCnt) &#123; enable = 0; &#125; &#125; &#125; &#125;&#125; void InterruptTmr0() interrupt 1 &#123; TH0 = T0RH; TL0 = T0RL; tmrFlg = 1; if (enable) BUZZ = ~BUZZ; else BUZZ = 1;&#125;","categories":[{"name":"51å•ç‰‡æœº","slug":"51å•ç‰‡æœº","permalink":"https://ljweb.xyz/categories/51%E5%8D%95%E7%89%87%E6%9C%BA/"}],"tags":[{"name":"51","slug":"51","permalink":"https://ljweb.xyz/tags/51/"}]},{"title":"æœ‰é™å·®åˆ†æ³•å¤„ç†ç”µç£åœºé—®é¢˜","slug":"æœ‰é™å·®åˆ†æ³•å¤„ç†ç”µç£åœºé—®é¢˜","date":"2021-11-28T16:00:00.000Z","updated":"2022-02-16T14:10:43.468Z","comments":true,"path":"2021/11/28/æœ‰é™å·®åˆ†æ³•å¤„ç†ç”µç£åœºé—®é¢˜/","link":"","permalink":"https://ljweb.xyz/2021/11/28/%E6%9C%89%E9%99%90%E5%B7%AE%E5%88%86%E6%B3%95%E5%A4%84%E7%90%86%E7%94%B5%E7%A3%81%E5%9C%BA%E9%97%AE%E9%A2%98/","excerpt":"","text":":mag: å‚è€ƒä»£ç ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455clear allm=22;for k=1:m for j=1:m if k==1 V(j,k)=1; elseif ((j==1)|(j==m)|(k==m)) V(j,k)=0; else V(j,k)=0.5; end endendcha=0.01;delta=0;n=0;while(1) n=n+1; for k=2:m-1 for j=2:m-1 Vnew(j,k)=0.25*(V(j+1,k)+V(j-1,k)+V(j,k+1)+V(j,k-1)); d=abs((Vnew(j,k)-V(j,k))/V(j,k)); if d&gt;delta delta=d; end V(j,k)=Vnew(j,k); end end if delta&lt;cha break; end if n&gt;100 break; end delta=0.;endk=1:m;j=1:m;figure(1)[DX,DY]=gradient(V,.4,.4);hold onquiver(k,j,DX,DY,2)hold offxlabel(&#x27;ç”µåœºçº¿å›¾åƒ&#x27;)title(&#x27;å§“å&#x27;)figure(2)[DX,DY]=gradient(V,.4,.4)A=(DX.^2+DY.^2).^0.5;[DA,DB]=gradient(A,.4,.4);hold onquiver(k,j,DA,DB,2)hold offxlabel(&#x27;ç”µåŠ›çº¿å›¾åƒ&#x27;)title(&#x27;å§“å&#x27;)","categories":[],"tags":[{"name":"å®éªŒ","slug":"å®éªŒ","permalink":"https://ljweb.xyz/tags/%E5%AE%9E%E9%AA%8C/"}]},{"title":"mini Macintosh plus(åŸºäºESP32)","slug":"mini-macintosh-plus-åŸºäºESP32","date":"2021-11-25T12:54:21.000Z","updated":"2022-02-16T14:10:43.384Z","comments":true,"path":"2021/11/25/mini-macintosh-plus-åŸºäºESP32/","link":"","permalink":"https://ljweb.xyz/2021/11/25/mini-macintosh-plus-%E5%9F%BA%E4%BA%8EESP32/","excerpt":"","text":"å‚è€ƒï¼šSprites mods - Miniature Macintosh Plus - Intro Intro Back in the early days of computing, there was a company called Apple. They just had great success with their Apple II line of computers, but needed to innovate to stay on top of the quickly-developing computer scene. They already were working on the Lisa line of computers, a minicomputer-inspired beast intended for business users and priced as such, but that was deemed too expensive for the average customer. As a secondary project, the Macintosh was developed, initially with the idea in mind to make a new generation of computer for â€˜the man on the streetâ€™ which should cost about $500. Steve Jobs got put on the project, and under him the hardware got more advanced,the software got a GUI instead of a text interface, and the price ballooned into almost $2500. Although the hardware you got for this price was slightly underwhelming, lacking e.g. the graphics accelerators and hardware sound capabilities other machines had, the software made more than up for it. This first Macintosh was the Mac 128K and its succes spurned more advanced models of this compact Mac, namely the Macintosh 512K, the Macintosh Plus, and the Macintosh SE-series. While the development of the Macintosh happened around 1984, way before I was at an age I could understand computers, I do feel some kind of kinship with the compact Macintosh: the first computer my parents owned was a Macintosh Plus. It was later joined by a 20MB SCSI hard disk, and on that machine I wrote my first Basic-programs. Back when I still lived in the Netherlands, I actually bought a broken SE/30 machine and converted that into a Linux-server while still being able to run Mac-software. I left that machine in the Netherlands, however, and here in Shanghai, I have no classic Apple hardware anymore. While obviously I donâ€™t really need a Mac Plus anymore for my day-to-day life, I did like the idea of having one available for when I felt nostalgic. Maybe I could get a tiny bit of the Macintosh experience back by building a small one myself. Seeing I already have some experience with making smaller versions of old hardware, why not try to apply that process to the venerable Mac Plus as well? DisplaySo, what to use when building something like this? One of the ways that sprung to mind was to take a Raspberry Pi or something, add a 2.5â€ LCD, add an emulator like PCE or MiniVMac, 3d-print an enclosure and call it a day. But I didnâ€™t feel that would do my idea justice: not only would it be too big for my tastes, it also would be too easy: With the original Mac 128K, even while the end result was seen as underpowered, the hardware designers that built it did their best to pull a few nice tricks to save cost. Just assembling off-the-shelf commodity hardware into a replica felt like I would be doing the original design a disservice. So off to Taobao for some more exotic components I went! I decided to start with the display. The Mac had a fairly high-resolution display for its time, and finding a display to replicate that had a pretty high priority. In general, when it comes to displays available on the Chinese electronic market, thereâ€™s a large choice available. Unfortunately, the â€˜large choiceâ€™ seems to consist of either higher-resolution but larger screens, or alternatively tiny but lower-resolution screens. Ideally, I needed a resolution of 512x342 pixels; that is the native Mac resolution and on a screen like that, I would be able to display everything without rescaling. Unfortunately, screens with this resolution donâ€™t readily exist; the next best resolution up would be something like 640x480. Screens with that resolution, for some reason, tend to start out pretty big: the smallest viable one I could find was about 3.5â€. So unfortunately, I would have to do some downscaling if I wanted to make the Mac as small as possible. After deciding it would be okay to downscale a bit, I had access to a fair amount more displays. One of the displays that popped up pretty quickly was the x163qln01, an 1.63â€ OLED screen made by AUO. While slightly expensive (about US$25 per screen), this display has good availability on Taobao and a datasheet that at least documents the pinouts, dimensions and power source requirements. This display seems to be made for certain Android smartwatches, and with some mangling of search terms, Google even spat out some initialization sequences I could use. The only problem (well, aside from the connector that had pins a mere 0.5mm apart) was that the display did not use a parallel or SPI interface, but a MIPI interface. Iâ€™d have to tackle that later on. With the choice of display made, I could move on to the processor. I grabbed an ESP32-Wrover module for this. This module contains an ESP32 (a WiFi chip with 2 32-bit CPUs running at 240MHz and about half a megabyte of RAM), 4MiB of flash and 4MiB of PSRAM memory. My guess was that the 2 CPU cores would be fast enough to emulate a Mac and that I could use the 4MiB of PSRAM memory to give the Mac its RAM. While 4MiB of flash is not that much, it should be enough for the emulator plus a small-ish hard disk with the system software and some programs. Also, it helps that I work for Espressif, making me pretty familiar with the hardware; what also helped was that I could just grab some modules from work instead of having to buy them and then wait for them to arrive. With that, I was mostly set - the OLED still needed some components to be powered so the component count was increased by some LDO and other power supply chips. The Mac also needed sound so I sourced a cheap amplifier chip and speaker, and for power and debugging I pulled a common FT232 module out of a drawer somewhere. All these components are pretty small and allow me to scale down the enclosure, resulting in a model that would be a little bit bigger than 1/6th of a real Mac. Driving the displayWhile I had nothing to complain about the resolution, size and brightness of the display, actually getting pixels to it was more problematic. The MIPI interface it has was not supported by the ESP32 silicon so I would have to find another way to interface with it. The MIPI DSI interface is a standard developed by the MIPI Alliance and not public; as a hobbyist, Iâ€™d have to piece together the details from leaked documents and probing of existing devices. Luckily, a year or two ago Mike Harrison reverse engineered the MIPI DSI interface used to control iPod displays (1, 2, 3, 4, 5, website) and also managed to find some copies of the specifications. This made my life a lot easier: it helps to at least know what to send to the display. While there is a lot more to it (and you should really watch the above videos if you want to know what), the physical layer of the MIPI protocol is pretty simple to explain. The MIPI protocol uses four wires in total: two data- and two clock-lines. The MIPI protocol has two modes of signalling: Low Power (LP) mode and High Speed (HS) mode. â€‹ In Low Power mode, the wires are used separately to transmit some control data structures as well as indicate certain commands that have direct effect on the physical receiver on the other side. The voltage swing in this mode is pretty large compared to the high speed mode: voltages are either around 1.2 volt for a high signal, or around 0 volt for a low signal. Because low speed mode has more signal states, it does things like tell the receiver to enter or exit high speed mode. In the diagram above, the blue lines indicate Low Power communication. In High Speed mode, the two clock lines (CLKP/CLKN) as well as the two data lines (DP/DN) work as differential lines, with one line always being the opposite as the other one. The receiver detects the difference between the two lines, and deduces the value being sent from this: a 1 if DP is higher, a 0 if DN is higher. High-speed mode, as the name implies, allows for very quick data transfers with clocks up to 1.5GHz. The trick the standard used to get this done without too much EMC and power use is to use very low voltages in this mode: the voltages on the pairs average to about 200mV, with variations of +/- 100mV per line to indicate the ones and zeroes. In the above diagram, the red bits are done in high-speed mode. For the actual data transfer, in high speed mode the interface can essentially be seen as a somewhat weird and differential SPI interface: there is a clock and data path, and every clock tick, the value of the data is clocked into the interface. A change from SPI, apart from the fact that the signals are differential, is that a data bit is clocked in whenever the CLK lines change state, instead of only on e.g raising edges. Another difference is that the start of a transfer is detected not by a /CS line going low, but by in-band signalling: every transmission starts with one unique binary â€˜magic wordâ€™ and the receiver detects this value to decide when a transmission starts. In order to interface this with the ESP32, Iâ€™d have to do some level shifting. I wanted to run the ESP32 from a 3.0V power source, so all GPIOs would also be 3.0 or 0 volt. To adapt this to the signal levels of the MIPI interface, I opted for the most cheap solution: just use some resistor divider networks. To figure out the resistor values, I effectively made equations for the three voltage output states that interested me (1.1V for Low Power high, 0.07V for High Speed low, 0.33V for High Speed high; voltages chosen to stay in-spec for most situations) and the three input states that should generate them. Using some math, I ended up at some equations. I could theoreticaly work out those equations by hand, but eventually decided to throw them into WolframAlpha which gave me the needed resistor values. 123456789101112 3VG -R1--+ R3G -R2--+ --+----&gt; R4 GNDR4*(1.9/R1+1.9/R3)=1.1, (1/(1/R4+1/R1+1/R2))*(2.93/R3)=0.07, (1/(1/R4+1/R1))*2.67*(1/R3+1/R2)=0.33, R2=1000R1=280, R2=1K, R3=3K6, R4=150 At that time, I figured I could also cheat a bit: because the lines are differential in high-speed mode, the display will only look at the difference between the two lines to deduce the data sent. This means that I can save a GPIO by holding one of the lines at a fixed voltage, making the other line higher and lower as needed. To do this, I needed a second type of resistor network: 1234567891011 3V R3G -R1--+ --+----&gt; R4 GNDR4*(1.9/R1+1.9/R3)=1.1,(1/(1/R4+1/R1))*(2.8/R3)=0.2,R4=150R1=320, R3=1500, R4=150 Another thing to solve was the clocking scheme. Normal SPI clocks in a bit on a raising edge of the clock line. (Or a falling one, depending on the configuration.) MIPI clocks in a bit on both the raising as well as the falling edge of the clock signal. While the ESP32s hardware SPI unit cannot by itself generate a signal like this, we can convert from one to another by using a simple D-type flipflop with its inverted output connected to its input. Every clock pulse on the input will change the level of the output, exactly as is needed here. SchematicWith the display hardware fixed up, the hardest part of the hardware design was done. Now we only need to add the rest. First up, the power supply. This is pretty simple: I feed the entire design from 5V from an USB-to-serial converter that I also can use as a debugging/programming interface. That voltage is taken to generate the +4.6V, -3.4V and 1.8V the OLED screen needs, as well as the 3.0V to feed the ESP32. The +4.6V and -3.4V are generated by a TPS65631 chip, and a reference schematic for that was included in the datasheet for thr OLED. The other voltages are generated by a pair of simple LDOs. The Macintosh also had sound. The quality isnâ€™t that good by modern standards (22KHz, 8-bit) but the sounds that various software programs make are by now quite iconic, so I couldnâ€™t forego a speaker here. The ESP32 has a built-in 8-bit DAC, and that is used to render the analog soundwaves that the emulator generates. That then gets put into a NS8002 which is a 2W class-AB audio amplifier housed in a small SOIC8 package. It is cheap, needs very few support components and makes more than enough noise for the tiny Mac to attract attention. One of the things that made the Macintosh so revolutionary is that it was one of the first commercial computers that came with a mouse. The Macintosh team thought so highly of the mouse that essentially the entire OS is based around mouse-controlled UI elements, and unlike, for example, an IBM PC, it is entirely possible to control the entire Macintosh with only a mouse. Obviously, my tiny Mac should also have such an important peripheral. I still do remember the original ball mouse that came with the early Macintoshes, and I do not quite relish the need to get the gunk off the little rollers every so often; there is a reason optical mice have replaced these mechanical devices entirely. This also has the advantage that parts for these new-fangles optical mice are quite easy to obtain: I did not need to spend much effort at all to locate a source of ADNS9500 gaming mouse sensors plus the corresponding optics, for instance. The other nice thing is that an optical mouse sensor is a pretty deeply integrated device: a mouse sensor only needs a few other external components to function, and the schematic reflects this. There are a few capacitors for voltage stabilization, an MOSFET (copied straight from the datasheet) to switch the laser diode, and some other jellybean parts. The mouse sensor communicates using a four-wire SPI signal, and Iâ€™ve re-used one of these wires to also send the mouse button signal over: the MISO pin is pulled down with a fairly strong pulldown when this button is pressed. The value of this pulldown resistor is not enough to stop the mouse sensor from communicating, but it is enough to overcome the pullup-resistor that normally pulls up the line, so when the sensor tristates the MISO line, the ESP32 can detect if the button is pressed. Finally, the OLED screen needs connecting. We already did all the hard work calculating all the resistor values, so the schematic should be more or less self-explanatory. The chip added is a D-type flipflop and is used to halve the clock rate: as mentioned before the MIPI standard needs a new data bit every time the clock polarity inverts, while the ESP32 can only send out a new one on a raising or falling edge. With the schematic drawn, I moved on to the PCB artwork. The display I chose was meant to be mounted to its controlling PCB, with the connector on the backside of that PCB. While that would not leave much room for the other components, I still wanted to put all the other components on the other side. Itâ€™s a good thing I have a good pair of eyes and a hot-air rework station: this allowed me to use 0603 components which made everything fit cleanly on the limited PCB space. Especially the connector for the display and the QFN OLED power supply chip would be pretty hard to do with a normal soldering iron. â€‹ For the mouse sensor and attached components, I figured out using a PCB would use up too much space. Instead, I opted to solder all components on the sensor itself, freeform style. This way, everything should be able to fit in the mouse. â€‹ Softwareâ€‹ Now obviously, the software is a fairly big element of this build: the entire Macintosh needs to be emulated. The Macintosh, however, is not that complicated a machine. It essentially consists of the 68000 microcontroller, a Zilog Z8530 serial communications controller that controls the serial port, a 6522 VIA for some internal input and output and for interfacing with the keyboard and some random PALs containing the logic for the display and sound. There also is an Integrated Woz Machine-chip to interface with the floppy drive. This is a fairly complicated chip; however I was not planning to emulate a floppy so for emulation it would be enough to emulate an IWM that always returns that thereâ€™s no floppy in the drive. Instead, my plan was to fully emulate the NCR 5380 SCSI chip, connected to an emulated SCSI hard disk that would read from the onboard flash of the ESP32-Wrover module. Furthermore, there are very few programs that attempt to access this hardware directly: programmers for the Mac were told from the start to use the OS-level hardware abstraction layers in order to stay compatible with later versions of the Mac hardware. In general, this means that when I succeeded emulating the hardware to a standard where the OS boots and stays happy, most programs would also run without complaints. Because of this I decided I might as well program the emulator from scratch. Well, not entirely from scratch; the 68000 is a fairly complex beast and I didnâ€™t feel like reinventing that particular wheel. Instead, I looked around on the Internet, and MAME had a nice and quick C-based 68K emulator called Musashi that fit the bill nicely. It needed some slight mangling to put the lookup tables for the opcodes into flash instead of RAM, but otherwise it didnâ€™t need much to port to the ESP32. However, I wasnâ€™t planning on developing the entire thing on the ESP32: while the chip has OpenOCD support allowing for a fair amount of debugging, the upload/test/fix/upload/â€¦ cycle would get pretty tedious. Instead, I decided to develop the thing on my Linux-machine first, keeping in mind the limits the ESP32 would eventually give me. So I went to work, using the datasheets for the various chips, the Linux-68K notes for the machine, as well as bits and pieces of the Inside Macintosh series that were floating around on the Internet. When I couldnâ€™t find out from these what to do, I still had the option to sneak a peek under the hood of other open-source emulators. Armed with all that, gcc as the C-compiler and libsdl as the library to get graphics going, I set to work. Long story short, some time later I ended up having a basic but mostly functional MacPlus emulator: mouse, video, SCSI hard disk and sound all worked: Because my hardware wasnâ€™t done yet, I decided to port my emulator to an ESP-Wrover-Kit devboard. I had access to a few of these boards anyway, and apart from the Wrover module I was going to use anyway, it also had a nice 320x240 display I could use to see if video works. After some tweaking, the Mac emulator actually ran fairly well on this board; it usually comes pretty close to the 7.8MHz the Mac Plus normally runs at. (Actually, 7.8MHz would be slightly faster than a Mac Plus; because the frame buffer and sound system in the real thing eat up some of the memory cycles, the actual effective frequency could be as much as 35% lower.) Obviously, getting the emulator working on a devboard is a nice step along the way, but in the end, the thing needs to run on the screen that I bought, not the devboard screen. And hold on a second, the devkit screen is 320x240 and cuts off a fair chunk of the Mac screen. The display I intend to use is 320x320 and as such only larger vertically: how am I going to get the 512x342 Mac screen displayed on it? Thereâ€™s one way to put 512x342 pixels onto a 320x320 screen, and that is scaling. Effectively, you take an image, then squish it to make it smaller, then you display it. However, scaling can be done in multiple ways and especially with a black-and-white image generated by an OS that assumes every pixel it set results in a clearly distinguishable point of light on the screen, there are multiple ways to do it badly. Effectively, I would like to lose as little resolution as possible. This means I needed to increase the resolution of my OLED. But how do you do that? I can hardly open up the OLED screen and squish some more pixels in there. However, I donâ€™t need to; the OLED display already has three times as many pixels as advertised. The reason for this is that the OLED screen is a color one: for each virtual â€˜pixelâ€™, it has a red, a green and a blue subpixel. Additionally, in this specific screen, the subpixels are laid out in triangles. To illustrate this, hereâ€™s a close-up of the screen, with three pixels lit: As you can see, the pixels are triangle-shaped sets of three subpixels; depending on the column they are on, the triangles either point up or down. This effectively means that our subpixel screen resolution is a nice 480 x 640 pixels instead. While still not entirely adequate for displaying 512x342 pixels, the difference is so small that with a small bit of well-chosen scaling the display looks as readable as an 1.63â€ display showing a GUI meant for a 9â€ screen will ever be: EnclosureSo now I had a display, software that could emulate a Macintosh Plus fairly well, plus a microcontroller it could run on. Whatâ€™s still missing? A nice box to put it in, obviously! I decided to 3d-print one on the nice Formlabs 1+ SLA printer my work has. To do this, I first needed a model. I wanted to build one from scratch. Obviously, to do this it would be best if I had a real Macintosh Plus at my disposal. I actually have one in my posession, but it was half a continent awayâ€¦ Luckily, I could get my hands on the next best thing: some kind soul uploaded the dimensions of an original Mac 128K (which has almost the same case as the Plus) to the iFixit wiki. I still do all my 3d modeling in OpenScad, and after some sweating and cursing to get all the curves looking like they should, I had a nice model of an 1-to-6-scale Mac. The mouse was also created from the iFixit images, but because it needed to fit the (relatively large) optical mouse sensor, unfortunately it couldnâ€™t be scaled to 1/6th of the real thing. The scale is more like 2/5th, making it seem somewhat large next to the tiny Mac but also making it way more usable for non-scaled-down human fingers. So now all that remained was to print the thing. I exported the design as various STL files and used the Formlabs 1+ to print them. This went fairly well, althought the resin was somewhat old so I put a few more supports than the default in to make sure I wouldnâ€™t get a mis-print. The end result came out pretty nice; the only regret I have is that I didnâ€™t put locking clips for the two halves in the design. I eventually worked around that by just sealing the two halves together using a drop of superglue. ResultSo, I had all the parts and I just needed to click them together. The PCB slots in the front of the case, where a few clips hold it in. The usb-to-serial converter, used as an upload mechanism and a power supply, slot into the back bit and is also held by a few clips. I forgot to make something to hold the speaker in, but some superglue can easily affix it inside the case. Finally, the mouse is connected using a bundle of thin wires. (And yes, they kind-of clash with the color schemeâ€¦ as soon as I find a nicer, thin multi-core cable Iâ€™ll replace it with that.) Now, when designing things on a computer in order to have them materialize in full later on, like what happens when you finally receive those PCBs from the factory or when your 3d-printer finishes printing that design you worked for weeks on, is the scale of the thing. Obviously, I knew that all sizes would be 1/6th of a real Mac, but only when everything was put together and I saw the thing in real life, the implications of this showed. The Mac truly is tiny! And even with its minute size and lack of a keyboard, it does run most of the things the Mac is well-known for. Here is a demonstration. The first 20 seconds are the memory test, and I know from experience the test lasting this long is not a bug: it took our original Mac Plus that long to boot as well after we upgraded it. So, what good is this Mac Plus in the end? Admittently, while I had a blast making it, without a keyboard it canâ€™t really serve a real purpose. Also, it has no connectivity to speak of: I planned to make it do AppleTalk over WiFi, but I failed because of some weirdnesses I couldnâ€™t emulate right in the serial controller chip of the original Mac. Still, with the project finished in the state it is, I can finally live my lifelong dream to have a Mac on my desk displaying the original After Dark flying toasters: As always, this project is open-source, and the PCB artwork as well as the case design and the firmware are up on Github. Everything is licensed under the Beer-Ware license so you can mostly do with it what you want. If you ever use it in something, Iâ€™d really appreciate a [note](http://spritesmods.com/?art=contact&amp;af=Miniature Macintosh Plus), however.","categories":[{"name":"æ¬è¿","slug":"æ¬è¿","permalink":"https://ljweb.xyz/categories/%E6%90%AC%E8%BF%90/"}],"tags":[{"name":"diy","slug":"diy","permalink":"https://ljweb.xyz/tags/diy/"}]},{"title":"é”‚ç”µæ± ç”µå‹æµ‹é‡ç”µè·¯è®¾è®¡","slug":"é”‚ç”µæ± ç”µå‹æµ‹é‡ç”µè·¯è®¾è®¡","date":"2021-11-24T17:36:05.000Z","updated":"2022-02-16T14:10:43.468Z","comments":true,"path":"2021/11/24/é”‚ç”µæ± ç”µå‹æµ‹é‡ç”µè·¯è®¾è®¡/","link":"","permalink":"https://ljweb.xyz/2021/11/24/%E9%94%82%E7%94%B5%E6%B1%A0%E7%94%B5%E5%8E%8B%E6%B5%8B%E9%87%8F%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1/","excerpt":"","text":"å‚è€ƒï¼š &emsp;&emsp;1.é”‚ç”µæ± ç”µå‹æµ‹é‡ç”µè·¯è®¾è®¡ - ç«‹åˆ›EDAå¼€æºç¡¬ä»¶å¹³å° (oshwhub.com) &emsp;&emsp;2.é”‚ç”µæ± ç”µå‹æµ‹é‡ç”µè·¯è®¾è®¡ â€“ ç‘ç”Ÿç½‘ (rationmcu.com) &emsp;&emsp;å…ˆè¡¥å……ä¸€ä¸‹é”‚ç”µæ± çš„åŸºæœ¬çŸ¥è¯† &emsp;&emsp; é”‚ç”µæ± åœ¨å……æ»¡ç”µçš„æ—¶å€™ï¼Œæ˜¯4.2Vï¼›åœ¨ç”¨å®Œç”µçš„æ—¶å€™ï¼Œä¸æ˜¯0Vï¼Œè€Œæ˜¯2.7Vå·¦å³ï¼Œæ¯ä¸ªå‚å®¶åˆ¶ä½œçš„é”‚ç”µæ± ï¼Œç•¥æœ‰å·®å¼‚ã€‚é‰´äºé”‚ç”µæ± ææ–™çš„å±€é™æ€§ï¼Œç”µå‹è¶…è¿‡4.2Vï¼Œä¼šå‘ç”Ÿå±é™©ï¼Œæ¯”å¦‚ç‡ƒçƒ§ï¼›ç”µå‹ä½äº2.7Vå·¦å³ï¼Œä¼šé€ æˆæ— æ³•å†æ¬¡å……ç”µï¼Œæ€»ä¹‹â€¦é”‚ç”µæ± ç”µå‹è¿‡é«˜å’Œè¿‡ä½ï¼Œéƒ½ä¼šé€ æˆæ°¸ä¹…æŸåã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„äº§å“åœ¨ä½¿ç”¨é”‚ç”µæ± çš„æ—¶å€™ï¼Œéœ€è¦æ—¶åˆ»ç›‘æµ‹é”‚ç”µæ± ç”µå‹ã€‚ &emsp;&emsp;å……ç”µçš„æ—¶å€™ï¼Œä¸è¦è¶…è¿‡4.2Vï¼Œè¿™ä¸ªè¦æ±‚ï¼Œéœ€è¦äº§å“ä¸­åŠ å…¥å……ç”µç®¡ç†èŠ¯ç‰‡ï¼Œå……ç”µç®¡ç†èŠ¯ç‰‡ä¼šè‡ªåŠ¨åœ¨4.2Vçš„æ—¶å€™åˆ‡æ–­å……ç”µã€‚æ”¾ç”µçš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯äº§å“åœ¨æ­£å¸¸ä½¿ç”¨çš„æ—¶å€™ï¼Œä¸è¦è®©é”‚ç”µæ± ç”µå‹ä½äº2.7Vï¼Œæ¯”å¦‚ï¼Œåœ¨2.7Vçš„æ—¶å€™ï¼Œè‡ªåŠ¨å¼ºåˆ¶å…³æœºã€‚ &emsp;&emsp;é‚£ä¹ˆï¼Œé”‚ç”µæ± ç”µå‹ç›‘æµ‹ç”µè·¯åº”è¯¥æ€ä¹ˆè®¾è®¡å‘¢ï¼Ÿ &emsp;&emsp;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåº”è¯¥æ˜¯åˆå­¦è€…æœ€å…ˆæƒ³åˆ°çš„åŠæ³•ã€‚ä¸è¿‡ï¼Œä»”ç»†åˆ†æåä¼šå‘ç°ï¼Œæœ‰å¤§é—®é¢˜ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ã€‚ &emsp;&emsp;VBATè¿æ¥åˆ°é”‚ç”µæ± æ­£æï¼Œé€šè¿‡ä¸¤ä¸ªç”µé˜»åˆ†å‹ï¼Œè¿æ¥åˆ°å•ç‰‡æœºçš„ADCå¼•è„šã€‚ADCæµ‹åˆ°çš„ç”µå‹ï¼Œå°±æ˜¯é”‚ç”µæ± ç”µå‹çš„ä¸€åŠã€‚å› ä¸ºé”‚ç”µæ± çš„ç”µå‹èŒƒå›´å¤§æ¦‚åœ¨2.7Våˆ°4.2Vä¹‹é—´ï¼Œæ‰€ä»¥ADCå¼•è„šçš„ç”µå‹ä¼šåœ¨1.35~2.1Vä¹‹é—´ï¼Œä¸ä¼šè¶…è¿‡æ™®é€šå•ç‰‡æœºçš„3.3Vç”µå‹ï¼Œçœ‹èµ·æ¥å¾ˆåˆç†ï¼Œä¸è¿‡ï¼Œå½“äº§å“å¤„äºå…³æœºçŠ¶æ€æ—¶ï¼Œæˆ‘ä»¬ä»¥ä¸ºé”‚ç”µæ± å°±ä¸è€—ç”µäº†ï¼Œå…¶å®ï¼Œé€šè¿‡ç”µè·¯å¯ä»¥å‘ç°ï¼Œé”‚ç”µæ± å…¶å®è¿˜åœ¨é€šè¿‡2ä¸ª10kçš„ç”µé˜»è€—ç”µã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¯¥äº§å“æ”¾ç€æ”¾ç€ç”µå°±å‡å°‘äº†ï¼Œè€Œä¸”å½“ç”µæ± ç”µå‹å‡å°‘åˆ°2.7Vä»¥ä¸‹æ—¶ï¼Œå°±å¯èƒ½æ— æ³•å……èµ·ç”µæ¥äº†ã€‚ &emsp;&emsp; æˆ‘åœ¨å›½å¤–çš„ä¸€æ¬¾äº§å“ä¸Šï¼Œçœ‹åˆ°äº†è¿™æ ·çš„ä¸€ä¸ªç”µè·¯ï¼Œå½“ç„¶ï¼Œå·²ç»æŠŠå®ƒä½¿ç”¨åˆ°æˆ‘çš„äº§å“å½“ä¸­ã€‚ &emsp;&emsp;ä¸Šé¢ç”µè·¯ï¼Œå¾ˆå·§å¦™çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä»£ä»·æ˜¯ç”µè·¯æ¿ä¸Šå¤šäº†1ä¸ªMOSç®¡å’Œ2ä¸ªç”µé˜»ï¼ŒCTRLå¼•è„šæ˜¯å•ç‰‡æœºçš„ä¸€ä¸ªæ™®é€šå¼•è„šï¼Œåœ¨å•ç‰‡æœºæ–­ç”µçš„æ—¶å€™ï¼Œè¦æ±‚æ˜¯é«˜é˜»æ€ï¼Œå¦åˆ™ä¹Ÿä¼šè€—ç”µï¼Â·è¿™é‡ŒåŠ MOSç®¡å¹¶ä¸æ˜¯ç”¨æ¥æ§åˆ¶â€œæ˜¯å¦è¦æµ‹é‡ç”µæ± ç”µå‹â€ï¼Œè€Œæ˜¯ä¸ºäº†åœ¨äº§å“å…³æœºçš„æ—¶å€™ï¼Œä¸è¦è®©é”‚ç”µæ± ç”µæ± çš„ç”µå‹é€šè¿‡ä¸¤ä¸ªåˆ†å‹ç”µé˜»ã€‚ &emsp;&emsp;æ­¤æ—¶ï¼Œè¿˜æœ‰ä¸ªé—®é¢˜è¦è§£å†³ã€‚ &emsp;&emsp;äº§å“åœ¨æ­£å¸¸ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œå½“ç”µæ± ç”µå‹å°äº3.3Væ—¶ï¼ŒLDOçš„è¾“å‡ºç”µå‹ï¼Œå°±ä¸å†æ˜¯3.3Väº†ï¼Œéšç€ç”µæ± ç”µå‹çš„å‡å°ï¼ŒLDOçš„è¾“å‡ºç”µå‹ä¹Ÿä¼šå‡å°ï¼Œæ­¤æ—¶â€¦ å¦‚æœä¸€ç›´ä½¿ç”¨3.3Vä½œä¸ºåŸºå‡†æ¥æµ‹é‡ç”µæ± ç”µå‹ï¼Œå°±ä¼šå‡ºç°é”™è¯¯ï¼Œæ‰€ä»¥ï¼Œéœ€è¦ä½¿ç”¨æœ‰åŸºå‡†ç”µå‹å¼•è„šçš„å•ç‰‡æœºï¼Œæˆ–è€…æœ‰â€œå†…éƒ¨å‚è€ƒç”µå‹â€+â€œå†…éƒ¨æµ‹é‡é€šé“â€åŠŸèƒ½çš„å•ç‰‡æœº ç”¨åŸºå‡†ç”µå‹å¼•è„šè®¡ç®—ç”µæ± ç”µå‹ï¼Œè¿™ä¸ªå¤§å®¶éƒ½æ¸…æ¥šï¼Œæˆ‘é‡ç‚¹è¯´ä¸€ä¸‹â€œå†…éƒ¨å‚è€ƒç”µå‹â€+â€œå†…éƒ¨æµ‹é‡é€šé“â€è¿™ä¸ªåŠŸèƒ½ã€‚ &emsp;&emsp;ç®€å•æ¥è¯´ï¼Œæœ‰äº†â€œå†…éƒ¨å‚è€ƒç”µå‹â€+â€œå†…éƒ¨æµ‹é‡é€šé“â€ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥é€šè¿‡å†…éƒ¨æµ‹é‡é€šé“å¾—åˆ°ç²¾ç¡®çš„VDDç”µå‹ï¼Œè€Œä¸å¿…ä½¿ç”¨åŸºå‡†ç”µå‹èŠ¯ç‰‡äº†ï¼Œæ¯•ç«Ÿï¼ŒåŸºå‡†ç”µå‹èŠ¯ç‰‡ä¹ŸæŒºè´µçš„ï¼Œè¿˜å¾—åœ¨ç”µè·¯æ¿ä¸Šå ä¸ªåœ°æ–¹ï¼Œä»¥åŠå¤šå‡ åˆ†é’±çš„ç„Šæ¥è´¹ç”¨ã€‚ &emsp;&emsp;ä¸‹é¢ï¼Œæˆ‘ä»¬ä»¥STC8Gç³»åˆ—å•ç‰‡æœºä¸ºä¾‹æ¥è¯´ä¸€ä¸‹ã€‚ &emsp;&emsp;STC8Gçš„ADCç¬¬15é€šé“ï¼Œç”¨æ¥æµ‹é‡å†…éƒ¨å‚è€ƒç”µå‹æºï¼Œå†…éƒ¨å‚è€ƒç”µå‹ä¸º1.19Vï¼Œé€šè¿‡æµ‹é‡å®ƒçš„å€¼ï¼Œåæ¨å‡ºVDDå€¼ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839unsigned int VDDA; // VDDAçš„ç”µå‹å€¼ å•ä½æ¯«ä¼unsigned int *BGV; // å†…éƒ¨å‚è€ƒç”µå‹å€¼ å•ä½æ¯«ä¼//ADCåˆå§‹åŒ–void ADC_Init(void)&#123; BGV = (int idata *)0xEF; ADCCFG = 0X2F; // è®¾ç½®ADCæ—¶é’Ÿ = 24000000/2/16/512 = 1465Hz è½¬æ¢ç»“æœå³å¯¹é½&#125;unsigned int ADCRead(void)&#123; unsigned int res; ADC_CONTR |= 0X40; // å¯åŠ¨ADè½¬æ¢ _nop_(); _nop_(); while(!(ADC_CONTR&amp;0X20)); // æŸ¥è¯¢ADCå®Œæˆæ ‡å¿— ADC_CONTR &amp;= ~0X20; // æ¸…é™¤å®Œæˆæ ‡å¿— res = (ADC_RES&lt;&lt;8)|ADC_RESL; //è¯»å–ADCç»“æœ return res;&#125;void Fetch_VDDA(void)&#123; unsigned int res=0; unsigned char i; ADC_CONTR = 0X8F; // ä½¿èƒ½ADCæ¨¡å— å¹¶é€‰æ‹©ç¬¬15é€šé“ ADCRead(); ADCRead(); for(i=0;i&lt;8;i++) &#123; res+=ADCRead(); &#125; res&gt;&gt;=3; // è¯»å–8æ¬¡ å–å¹³å‡å€¼ VDDA = (unsigned int)(1023L**BGV/res); // å¾—å‡ºçš„ç»“æœå•ä½æ˜¯æ¯«ä¼&#125;ä¸Šé¢ä»£ç ï¼Œè·å¾—äº†çœŸå®çš„VDDAå€¼ï¼Œç„¶åå°±å¯ä»¥è®¡ç®—å‡ºçœŸå®çš„ç”µæ± ç”µå‹ã€‚ æœ¬æ–‡æ‘˜è‡ªç‘ç”Ÿç½‘ï¼Œç‚¹å‡»æŸ¥çœ‹åŸé“¾æ¥","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://ljweb.xyz/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[]},{"title":"å¤§åŠŸç‡ç›´æµæœ‰åˆ·ç”µæœºé©±åŠ¨è®¾è®¡","slug":"å¤§åŠŸç‡ç›´æµæœ‰åˆ·ç”µæœºé©±åŠ¨è®¾è®¡","date":"2021-11-24T17:09:04.000Z","updated":"2022-02-16T14:10:43.384Z","comments":true,"path":"2021/11/24/å¤§åŠŸç‡ç›´æµæœ‰åˆ·ç”µæœºé©±åŠ¨è®¾è®¡/","link":"","permalink":"https://ljweb.xyz/2021/11/24/%E5%A4%A7%E5%8A%9F%E7%8E%87%E7%9B%B4%E6%B5%81%E6%9C%89%E5%88%B7%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/","excerpt":"","text":"å‚è€ƒï¼š &emsp;&emsp;1.IR2104é©±åŠ¨åŸç†_ChenYXçš„åšå®¢-CSDNåšå®¢ &emsp;&emsp;2.4833Nï¼ŒMOSï¼Œ ç›´æµç”µæœºé©±åŠ¨æ¿ - ç«‹åˆ›EDAå¼€æºç¡¬ä»¶å¹³å° (oshwhub.com) &emsp;&emsp;3.BTN8982åŒè·¯å¤§ç”µæµç”µæœºé©±åŠ¨ - ç«‹åˆ›EDAå¼€æºç¡¬ä»¶å¹³å° (oshwhub.com) &emsp;&emsp;4.å¤§ç”µæµåŒè·¯ç›´æµç”µæœºé©±åŠ¨ Hæ¡¥ MOSç®¡ ã€ä½åˆ›ã€‘ ã€é«˜æ€§ä»·æ¯”ã€‘ - ç«‹åˆ›EDAå¼€æºç¡¬ä»¶å¹³å° (oshwhub.com) &emsp;&emsp;5.BTN7971Bæ¨¡å—_å¤§åŠŸç‡Hæ¡¥é©±åŠ¨å™¨ - ç«‹åˆ›EDAå¼€æºç¡¬ä»¶å¹³å° (oshwhub.com)","categories":[{"name":"æ™ºèƒ½è½¦","slug":"æ™ºèƒ½è½¦","permalink":"https://ljweb.xyz/categories/%E6%99%BA%E8%83%BD%E8%BD%A6/"}],"tags":[{"name":"ç”µè·¯","slug":"ç”µè·¯","permalink":"https://ljweb.xyz/tags/%E7%94%B5%E8%B7%AF/"}]},{"title":"linuxå­¦ä¹ ç¬”è®°","slug":"linuxå­¦ä¹ ç¬”è®°","date":"2021-11-24T16:00:10.000Z","updated":"2022-02-16T14:10:43.384Z","comments":true,"path":"2021/11/24/linuxå­¦ä¹ ç¬”è®°/","link":"","permalink":"https://ljweb.xyz/2021/11/24/linux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","excerpt":"","text":"å‚è€ƒï¼š Linuxå¸¸ç”¨å‘½ä»¤_Demonçš„åšå®¢-CSDNåšå®¢_linuxå¸¸ç”¨å‘½ä»¤","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://ljweb.xyz/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[]},{"title":"gitå­¦ä¹ ç¬”è®°","slug":"gitå­¦ä¹ ç¬”è®°","date":"2021-11-22T17:37:08.000Z","updated":"2022-02-16T14:10:43.384Z","comments":true,"path":"2021/11/22/gitå­¦ä¹ ç¬”è®°/","link":"","permalink":"https://ljweb.xyz/2021/11/22/git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","excerpt":"","text":"å‚è€ƒï¼šGitå­¦ä¹ ç¬”è®° (fushaolei.github.io) ğŸ¤³å¸¸ç”¨æŒ‡ä»¤Gitå­¦ä¹ ç¬”è®° (fushaolei.github.io) æŒ‡ä»¤ è¯´æ˜ git init åˆå§‹åŒ– git add . å°†ä¿®æ”¹æ”¾å…¥æš‚å­˜åŒº git status æŸ¥çœ‹çŠ¶æ€ git log å¯ä»¥æŸ¥çœ‹æœ‰å‡ ä¸ªç‰ˆæœ¬æäº¤åˆ°ä»“åº“é‡Œ git reset --hard ç‰ˆæœ¬å· ç‰ˆæœ¬å›é€€ï¼Œhardå¼ºåˆ¶å›é€€ï¼Œsoftçš„è¯ä¼šä¿ç•™ä¿®æ”¹ git stash å°†ä¿®æ”¹ä¿å­˜èµ·æ¥ git stash save &quot;xxx&quot; å°†ä¿®æ”¹ä¿å­˜èµ·æ¥ï¼Œå¹¶è®¾ç½®è¿™ä¸ªä¿å­˜çš„æ ‡ç­¾ git stash apply stash@&#123;x&#125; å°†ä¿®æ”¹ç§»å‡ºæ¥ git branch -vv æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯æ˜¯å¦ä¸è¿œç«¯åˆ†æ”¯å»ºç«‹äº†è¿æ¥ git push origin &lt;åˆ†æ”¯å&gt;:&lt;åˆ†æ”¯å&gt; ä»…ä»…å°†æœ¬åœ°åˆ†æ”¯æ¨é€åˆ°è¿œç«¯åˆ†æ”¯ï¼Œ æ³¨æ„:è¿™ä¸ªæ“ä½œåªæ˜¯å•çº¯çš„æŠŠæœ¬åœ°çš„åˆ†æ”¯æ¨é€åˆ°è¿œç«¯,å°šæœªå»ºç«‹è¿æ¥ git remote æŸ¥çœ‹è¿œç¨‹åº“çš„ä¿¡æ¯ï¼Œç”¨git remote -vå¯ä»¥çœ‹åˆ°æ›´è¯¦ç»†çš„ä¿¡æ¯ git pull --rebase origin master å’Œè¿œç¨‹ä»“åº“è¿›è¡Œä¸€ä¸ªåŒæ­¥","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://ljweb.xyz/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://ljweb.xyz/tags/%E6%95%99%E7%A8%8B/"},{"name":"git","slug":"git","permalink":"https://ljweb.xyz/tags/git/"}]},{"title":"ä½¿ç”¨GitHubActionå®ç°hexoåœ¨çº¿å†™ä½œ","slug":"ä½¿ç”¨GitHubActionå®ç°hexoåœ¨çº¿å†™ä½œ","date":"2021-11-22T16:56:51.000Z","updated":"2022-02-16T14:10:43.384Z","comments":true,"path":"2021/11/22/ä½¿ç”¨GitHubActionå®ç°hexoåœ¨çº¿å†™ä½œ/","link":"","permalink":"https://ljweb.xyz/2021/11/22/%E4%BD%BF%E7%94%A8GitHubAction%E5%AE%9E%E7%8E%B0hexo%E5%9C%A8%E7%BA%BF%E5%86%99%E4%BD%9C/","excerpt":"","text":"å‚è€ƒï¼šGitHub Action + Hexoå®ç°åœ¨çº¿å†™ä½œ_ç£Šå°‘1999çš„åšå®¢-CSDNåšå®¢ &emsp;&emsp;å»ºä¸€ä¸ªæ–°çš„ä»“åº“ç»™hexoæ”¾æºæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨GitHub Actionï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849# workflow namename: Hexo Blog CI# master branch on push, auto runon: push: branches: - master jobs: build: runs-on: ubuntu-latest steps: # check it to your workflow can access it # from: https://github.com/actions/checkout - name: Checkout Repository master branch uses: actions/checkout@master # from: https://github.com/actions/setup-node - name: Setup Node.js 12.x uses: actions/setup-node@master with: node-version: &quot;12.x&quot; - name: Setup Hexo Dependencies run: | npm install hexo-cli -g npm install - name: Setup Deploy Private Key env: HEXO_DEPLOY_PRIVATE_KEY: $&#123;&#123; secrets.HEXO_DEPLOY_PRIVATE_KEY &#125;&#125; run: | mkdir -p ~/.ssh/ echo &quot;$HEXO_DEPLOY_PRIVATE_KEY&quot; &gt; ~/.ssh/id_rsa chmod 600 ~/.ssh/id_rsa ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts - name: Setup Git Infomation run: | git config --global user.name &#x27;&lt;ä½ çš„ç”¨æˆ·å&gt;&#x27; git config --global user.email &#x27;&lt;ä½ ç™»å½•çš„email&gt;&#x27; - name: Deploy Hexo run: | hexo clean hexo generate hexo deploy","categories":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://ljweb.xyz/categories/%E6%95%99%E7%A8%8B/"}],"tags":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://ljweb.xyz/tags/%E6%95%99%E7%A8%8B/"},{"name":"git","slug":"git","permalink":"https://ljweb.xyz/tags/git/"}]},{"title":"hexoé¦–è¡Œç¼©è¿›ä¸æ˜¾ç¤ºè§£å†³æ–¹æ³•","slug":"hexoé¦–è¡Œç¼©è¿›ä¸æ˜¾ç¤ºè§£å†³æ–¹æ³•","date":"2021-11-21T13:57:20.000Z","updated":"2022-02-16T14:10:43.384Z","comments":true,"path":"2021/11/21/hexoé¦–è¡Œç¼©è¿›ä¸æ˜¾ç¤ºè§£å†³æ–¹æ³•/","link":"","permalink":"https://ljweb.xyz/2021/11/21/hexo%E9%A6%96%E8%A1%8C%E7%BC%A9%E8%BF%9B%E4%B8%8D%E6%98%BE%E7%A4%BA%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/","excerpt":"","text":"&emsp;&emsp;é€šè¿‡Markdownå†™çš„æ–‡ç« è½¬æ¢æˆHTMLåé¦–è¡Œæ²¡æœ‰ç¼©è¿›2æ ¼ï¼Œå³ä½¿åœ¨Typoraä¸­æ˜¾ç¤ºæœ‰ç¼©è¿›ï¼ˆè‡ªå·±å¤šæ•²äº†å‡ ä¸ªç©ºæ ¼æˆ–è€…Tapé”®ï¼‰ï¼Œè¿™ç§åŸå› æ˜¯Markdownå¯¹ä¸­æ–‡çš„æ”¯æŒä¸å…¨å¯¼è‡´çš„ã€‚ å‚è€ƒï¼š Markdowné¦–è¡Œç¼©è¿›è§£å†³æ–¹æ³•å®ä¾‹_DC-CSDNåšå®¢ è§£å†³æ–¹æ³•: 1ç”¨ &amp;emsp; ä»£æ›¿ç©ºæ ¼","categories":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://ljweb.xyz/categories/%E6%95%99%E7%A8%8B/"}],"tags":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://ljweb.xyz/tags/%E6%95%99%E7%A8%8B/"},{"name":"typora","slug":"typora","permalink":"https://ljweb.xyz/tags/typora/"}]},{"title":"ç«‹åˆ›è®­ç»ƒè¥esp32æ•°ç ç®¡æ—¶é’Ÿ","slug":"ç«‹åˆ›è®­ç»ƒè¥esp32æ•°ç ç®¡æ—¶é’Ÿ","date":"2021-11-21T09:05:11.000Z","updated":"2022-02-16T14:10:43.468Z","comments":true,"path":"2021/11/21/ç«‹åˆ›è®­ç»ƒè¥esp32æ•°ç ç®¡æ—¶é’Ÿ/","link":"","permalink":"https://ljweb.xyz/2021/11/21/%E7%AB%8B%E5%88%9B%E8%AE%AD%E7%BB%83%E8%90%A5esp32%E6%95%B0%E7%A0%81%E7%AE%A1%E6%97%B6%E9%92%9F/","excerpt":"","text":"&emsp;&emsp;æœ€è¿‘å‚åŠ äº†å­¦æ ¡å®éªŒå®¤çš„ç«‹åˆ›è®­ç»ƒè¥é¡¹ç›®ï¼Œé¡¹ç›®æ˜¯åšä¸€ä¸ªç‰©è”ç½‘çš„æ—¶é’Ÿï¼Œè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ä¸€ä¸ªé¡¹ç›®ï¼Œä½¿ç”¨çš„æ˜¯ESP32-C3æ¨¡ç»„ï¼Œä¸¤ä¸ªå››ä½æ•°ç ç®¡æ¥æ˜¾ç¤ºæ—¶é—´ï¼ŒMAX7219é©±åŠ¨æ•°ç ç®¡ï¼ŒDS1302æ—¶é’ŸèŠ¯ç‰‡æä¾›æ—¶é—´ï¼Œç„¶åè¿˜æœ‰äº”ä¸ªæŒ‰é”®ã€‚ä¸€ä¸ªç¨‹åºä¸‹è½½æŒ‰é”®ï¼Œä¸€ä¸ªRSTæŒ‰é”®ï¼Œè¿˜æœ‰ä¸‰ä¸ªåŠŸèƒ½æŒ‰é”®ã€‚ &emsp;&emsp;ç¡¬ä»¶ä¸Šæ¥è¯´è¿˜æ˜¯å¾ˆç®€å•çš„ã€‚æˆ‘åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ äº†é”‚ç”µæ± å……æ”¾ç”µç®¡ç†ï¼Œä½¿ç”¨çš„æ˜¯TP4054è¿™é¢—å……ç”µICå¤–å›´ç”µè·¯éå¸¸å°‘ï¼Œå› ä¸ºç›®å‰æˆ‘è¿˜ä¸ä¼šå…¶ä»–çš„å……ç”µç”µè·¯ï¼Œå°±åªèƒ½å…ˆç”¨è¿™ä¸ªäº†ï¼Œè¿™é¢—èŠ¯ç‰‡å¸¦ä¸€ä¸ªå……ç”µæŒ‡ç¤ºå¼•è„šï¼Œè¿ä¸€é¢—LEDå°±èƒ½æŒ‡ç¤ºå……ç”µäº†ã€‚æˆ‘è¿˜åŠ äº†ä¸ªSHT30æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ï¼Œç„¶åæŠŠDS1302æ¢æˆäº†PCF8563ï¼Œè¿™é¢—æ—¶é’ŸèŠ¯ç‰‡ä¸å•ç‰‡æœºä½¿ç”¨I2Cé€šä¿¡ï¼Œç¨‹åºè®¾è®¡ä¸Šè¦ç¨å¾®å¤æ‚äº›ï¼ŒSHT30ä¹Ÿæ˜¯ç”¨ I2C é€šä¿¡çš„ï¼Œ I2C ç¡®å®æ¯”è¾ƒç¥å¥‡ï¼Œæˆ‘å¤ç”¨äº†ä¸¤ä¸ªå¼•è„šæ¥è¿æ¥è¿™ä¸¤é¢—èŠ¯ç‰‡ã€‚ &emsp;&emsp;è¿™æ¬¡ä½¿ç”¨ç«‹åˆ›EDAè¿›è¡Œç”µè·¯ã€PCBè®¾è®¡ï¼šé¡¹ç›®å¼€æºé“¾æ¥ &emsp;&emsp;è½¯ä»¶ä¸Šæœ¬æ¥æ‰“ç®—ç”¨ESP-IDFçš„ï¼Œå¯æ˜¯é…ç½®èµ·æ¥éº»çƒ¦çš„å¾ˆï¼Œæ‰€ä»¥æœ€åæˆ‘è¿˜æ˜¯ç”¨æˆ‘ç›®å‰æ¯”è¾ƒç†Ÿæ‚‰çš„arduinoæ¥å®ç°çš„ã€‚æ‰“ç®—ä»¥åæœ‰æ—¶é—´å†æ¥ç”¨ESP-IDFã€‚ 1.arduinoå‚è€ƒä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159#include &lt;WiFi.h&gt;#include &lt;time.h&gt;#include &quot;NTPClient.h&quot;#include &lt;Ds1302.h&gt;const char* ssid = &quot;ssid&quot;;const char* password = &quot;password&quot;;int CLK = 7;int CS = 6;int DIN = 4; //è¿™é‡Œå®šä¹‰äº†é‚£ä¸‰ä¸ªè„šint sw1=18;//æ‹¨è½®æŒ‰é”®int sw2=19;int sw3=10;int sec; int n=10;#define battery 0WiFiUDP ntpUDP; NTPClient timeClient(ntpUDP, &quot;ntp1.aliyun.com&quot;, 60*60*8, 30*60*1000); void smgdispaly() &#123; if(sec!=timeClient.getSeconds())&#123; int h1,h2,m1,m2,s1,s2; h1=timeClient.getHours()/10; h2=timeClient.getHours()%10; m1=timeClient.getMinutes()/10; m2=timeClient.getMinutes()%10; s1=timeClient.getSeconds()/10; s2=timeClient.getSeconds()%10; Write_Max7219(0x0f, 0x00); //æ˜¾ç¤ºæµ‹è¯•ï¼š1ï¼›æµ‹è¯•ç»“æŸï¼Œæ­£å¸¸æ˜¾ç¤ºï¼š0 Write_Max7219(1,h1); Write_Max7219(2,h2); Write_Max7219(4,m1); Write_Max7219(5,m2); Write_Max7219(7,s1); Write_Max7219(8,s2); sec=timeClient.getSeconds(); &#125; &#125;void batterydisplay()&#123; float analog_value = 0; analog_value = analogRead(battery); delay(1000); Serial.printf(&quot;Current Reading on Pin(%d)=%f\\n&quot;,battery,analog_value*4.2/2910); &#125;void switchkey()&#123; if(digitalRead(sw2)==LOW)&#123; delay(10); if(digitalRead(sw2)==LOW)&#123; Serial.println(n); Write_Max7219(0x09, 0xff); Write_Max7219(0x0a, n++); if(n&gt;=15) n=15; &#125; &#125; if(digitalRead(sw3)==LOW)&#123; delay(10); if(digitalRead(sw3)==LOW)&#123; Serial.println(n); Write_Max7219(0x09, 0xff); Write_Max7219(0x0a, n--); if(n&lt;=0) n=0; &#125; &#125;&#125;void setup() &#123; // put your setup code here, to run once: Serial.begin(115200); pinMode(CLK,OUTPUT); pinMode(CS,OUTPUT); pinMode(DIN,OUTPUT); //è®©ä¸‰ä¸ªè„šéƒ½æ˜¯è¾“å‡ºçŠ¶æ€ pinMode(battery,INPUT); pinMode(sw1,INPUT_PULLUP); pinMode(sw2,INPUT_PULLUP); pinMode(sw3,INPUT_PULLUP); Init_MAX7219(); WiFi.begin(ssid, password); while (WiFi.status() != WL_CONNECTED) &#123; delay(500); Serial.print(&quot;.&quot;); &#125; Serial.println(&quot;&quot;); Serial.println(&quot;WiFi connected&quot;); Serial.println(&quot;IP address: &quot;); Serial.println(WiFi.localIP()); timeClient.begin(); sec=timeClient.getSeconds(); Serial.println(timeClient.getFormattedTime());&#125;void loop() &#123; // put your main code here, to run repeatedly: timeClient.update(); smgdispaly(); switchkey(); delay(50);&#125;void Delay_xms(unsigned int x)&#123; unsigned int i,j; for(i=0;i&lt;x;i++) for(j=0;j&lt;112;j++);&#125;//--------------------------------------------//åŠŸèƒ½ï¼šå‘MAX7219å†™å…¥å­—èŠ‚//å…¥å£å‚æ•°ï¼šDATA //å‡ºå£å‚æ•°ï¼šæ— //è¯´æ˜ï¼švoid Write_Max7219_byte(unsigned char DATA) &#123; unsigned char i; digitalWrite(CS,LOW); for(i=8;i&gt;=1;i--) &#123; digitalWrite(CLK,LOW); if(DATA&amp;0X80) digitalWrite(DIN,HIGH); else digitalWrite(DIN,LOW); DATA&lt;&lt;=1; digitalWrite(CLK,HIGH); &#125; &#125;//-------------------------------------------//åŠŸèƒ½ï¼šå‘MAX7219å†™å…¥æ•°æ®//å…¥å£å‚æ•°ï¼šaddressã€dat//å‡ºå£å‚æ•°ï¼šæ— //è¯´æ˜ï¼švoid Write_Max7219(unsigned char address,unsigned char dat)&#123; digitalWrite(CS,LOW); Write_Max7219_byte(address); //å†™å…¥åœ°å€ï¼Œå³æ•°ç ç®¡ç¼–å· Write_Max7219_byte(dat); //å†™å…¥æ•°æ®ï¼Œå³æ•°ç ç®¡æ˜¾ç¤ºæ•°å­— digitalWrite(CS,HIGH); &#125;void Init_MAX7219(void)&#123; Write_Max7219(0x09, 0xff); //è¯‘ç æ–¹å¼ï¼šBCDç  Write_Max7219(0x0a, 15); //äº®åº¦ Write_Max7219(0x0b, 0x07); //æ‰«æç•Œé™ï¼›4ä¸ªæ•°ç ç®¡æ˜¾ç¤º Write_Max7219(0x0c, 0x01); //æ‰ç”µæ¨¡å¼ï¼š0ï¼Œæ™®é€šæ¨¡å¼ï¼š1 Write_Max7219(1,0xa); Write_Max7219(2,0xa); Write_Max7219(3,0xa); Write_Max7219(4,0xa); Write_Max7219(5,0xa); Write_Max7219(6,0xa); Write_Max7219(7,0xa); Write_Max7219(8,0xa); delay(100);&#125; 2.ESP-IDFæ­£åœ¨å°è¯•ä¸­â€¦â€¦ å‚è€ƒï¼šå¿«é€Ÿå…¥é—¨ - ESP32 - â€” ESP-IDF ç¼–ç¨‹æŒ‡å— latest æ–‡æ¡£ (espressif.com)","categories":[{"name":"arduino","slug":"arduino","permalink":"https://ljweb.xyz/categories/arduino/"}],"tags":[{"name":"diy","slug":"diy","permalink":"https://ljweb.xyz/tags/diy/"},{"name":"arduino","slug":"arduino","permalink":"https://ljweb.xyz/tags/arduino/"},{"name":"Cè¯­è¨€","slug":"Cè¯­è¨€","permalink":"https://ljweb.xyz/tags/C%E8%AF%AD%E8%A8%80/"}]},{"title":"OpenMv+arduino_unoå®ç°å¾ªè¿¹","slug":"OpenMv-arduino-unoå®ç°å¾ªè¿¹","date":"2021-11-21T08:36:55.000Z","updated":"2022-02-16T14:10:43.384Z","comments":true,"path":"2021/11/21/OpenMv-arduino-unoå®ç°å¾ªè¿¹/","link":"","permalink":"https://ljweb.xyz/2021/11/21/OpenMv-arduino-uno%E5%AE%9E%E7%8E%B0%E5%BE%AA%E8%BF%B9/","excerpt":"","text":"OpenMvï¼š å‚è€ƒï¼šå·¡çº¿å°è½¦ Â· OpenMVä¸­æ–‡å…¥é—¨æ•™ç¨‹ 1.OpenMv(main.py)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335&#x27;&#x27;&#x27;åŠŸèƒ½æè¿° å®Œæ•´åŠŸèƒ½åŒ…æ‹¬ï¼š * ç›´çº¿å·¡çº¿ * ç›´è§’è½¬å¼¯åˆ¤å®š (å·¦è½¬orå³è½¬) * Tå­—å½¢è·¯å£åˆ¤å®š * åå­—å½¢è·¯å£åˆ¤å®š å…¶ä¸­ï¼´å­—å½¢è·Ÿåå­—å½¢å¯ä»¥ç”¨ä½œå››è½´æ‚¬åœçš„å‚è€ƒç‚¹ã€‚åŸç†ä»‹ç» ç®—æ³•çš„ä¸»è¦æ ¸å¿ƒåœ¨äºï¼Œè®²æ•´ä¸ªç”»é¢åˆ†å‰²å‡ºæ¥5ä¸ªROIåŒºåŸŸ * ä¸Šæ–¹æ¨ªå‘é‡‡æ · * ä¸­é—´æ¨ªå‘é‡‡æ · * ä¸‹æ–¹æ¨ªå‘é‡‡æ · * å·¦ä¾§å‚ç›´é‡‡æ · * å³ä¾§å‚ç›´é‡‡æ · é€šè¿‡åˆ¤æ–­5ä¸ªå›¾ç‰‡çš„ç»„åˆå…³ç³»ç»™å‡ºè·¯å£ç±»å‹çš„åˆ¤æ–­&#x27;&#x27;&#x27;import sensorimport imageimport timeimport mathimport pybfrom pyb import Pin, Timer, UART,LEDfrom GeometryFeature import GeometryFeatureLED(4).on()is_debug = True#--------------æ„Ÿå…‰èŠ¯ç‰‡é…ç½® START -------------------DISTORTION_FACTOR = 1.5 # è®¾å®šç•¸å˜ç³»æ•°IMG_WIDTH = 64IMG_HEIGHT = 64def init_sensor(): &#x27;&#x27;&#x27; åˆå§‹åŒ–æ„Ÿå…‰èŠ¯ç‰‡ &#x27;&#x27;&#x27; sensor.reset() sensor.set_pixformat(sensor.GRAYSCALE) sensor.set_framesize(sensor.B64X64) # åˆ†è¾¨ç‡ä¸ºB64X64 sensor.skip_frames(time=2000) sensor.set_auto_gain(False) # é¢œè‰²è¿½è¸ªå…³é—­è‡ªåŠ¨å¢ç›Š sensor.set_auto_whitebal(False) # é¢œè‰²è¿½è¸ªå…³é—­ç™½å¹³è¡¡init_sensor()#--------------æ„Ÿå…‰èŠ¯ç‰‡é…ç½® END -------------------def ternleft(): uart.write(&#x27;G&#x27;) time.sleep_ms(650) uart.write(&#x27;L&#x27;) time.sleep_ms(600)def ternright(): uart.write(&#x27;G&#x27;) time.sleep_ms(650) uart.write(&#x27;R&#x27;) time.sleep_ms(590)#--------------ä¸²å£UARTéƒ¨åˆ† START -------------------uart = pyb.UART(3,115200,timeout_char = 1000) #ä¸²å£åˆå§‹åŒ–def get_symbol(num): &#x27;&#x27;&#x27; æ ¹æ®æ•°å€¼æ­£è´Ÿï¼Œè¿”å›æ•°å€¼å¯¹åº”çš„ç¬¦å· æ­£æ•°ï¼šâ€˜+â€™ï¼Œ è´Ÿæ•°â€˜-â€™ ä¸»è¦ä¸ºäº†æ–¹ä¾¿Cè¯­è¨€è§£æå¾…ç¬¦å·çš„æ•°å€¼ã€‚ &#x27;&#x27;&#x27; if num &gt;=0: return &#x27;+&#x27; else: return &#x27;-&#x27;def data_format_wrapper(yaw_angle, sum_x, sum_y, cx_mean, cx, cy, is_left_angle, is_t, last_y): &#x27;&#x27;&#x27; æ ¹æ®é€šä¿¡åè®®å°è£…æ•°æ® TODO é‡æ–°ç¼–å†™é€šä¿¡åè®® ä¸é…å¥—Cè§£æä»£ç  yaw_angle,sum_x, sum_y æ²¡æœ‰ç”¨åˆ° cx_mean: roi 1 2 3 å¯¹åº”çš„bolbä¸­å¿ƒçš„xåæ ‡åŠ æƒå¹³å‡ï¼Œ å¦‚æœæ²¡æœ‰å°±è¡¥32 éƒ½æ²¡æœ‰å°±èµ‹å€¼ä¸ºåŸæ¥çš„å€¼ cx : roi 1 3 blob ä¸­å¿ƒåæ ‡çš„åŠ æƒå¹³å‡ï¼Œ å¦‚æœä¸€æ–¹ä¸¢å¤±ï¼Œ å°±èµ‹å€¼ä¸ºå¦å¤–ä¸€ä¸ª éƒ½æ²¡æœ‰å°±èµ‹å€¼ä¸ºåŸæ¥çš„å€¼ cy : roi 4 5 blob ä¸­å¿ƒåæ ‡çš„åŠ æƒå¹³å‡ï¼Œå¦‚æœä¸€æ–¹ä¸¢å¤±ï¼Œ å°±èµ‹å€¼ä¸ºå¦å¤–ä¸€ä¸ªï¼Œ éƒ½æ²¡æœ‰å°±èµ‹å€¼ä¸ºåŸæ¥çš„å€¼ is_left_angle :ä»£è¡¨æ˜¯å¦æœ‰ç›´è§’ï¼Œï¼ï¼ï¼ä¿¡æ¯ä¸¢å¤± å…¶å®ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªå­—ç¬¦æ¥è¡¨ç¤ºï¼Œæ˜¯å·¦è½¬è¿˜æ˜¯å³è½¬ T(Tå­—å½¢) L(Left) R(Right) last_x, last_y æ˜¯ä¸¤ä¸ªç›´çº¿çš„äº¤å‰ç‚¹çš„åæ ‡ æ”¹å†™ä¸º intersect_xï¼Œintersect_y args = [ get_symbol(yaw_angle), # åèˆªè§’ç¬¦å· abs(int(yaw_angle)), # åèˆªè§’ get_symbol(sum_x), # å…‰æµæ•°æ®sux_xçš„ç¬¦å· abs(int(sum_x)), # å…‰æµæ•°æ®sum_x get_symbol(sum_y), # å…‰æµæ•°æ®sum_yçš„ç¬¦å· abs(int(sum_y)), # å…‰æµæ•°æ® sum_y int(cx_mean), # xçš„ä¸­å¿ƒï¼Œä¸‰ä¸ªå–æ ·åŒºåŸŸè‰²å—ä¸­å¿ƒxåæ ‡çš„å¹³å‡å€¼ int(cx), int(cy), int(is_left_angle), int(last_x), int(last_y) ] # å°†æ•°å€¼åˆ—è¡¨æŒ‰ç…§é€šä¿¡åè®®ï¼Œè½¬æ¢ä¸ºå¾…å‘é€çš„å­—ç¬¦ info = &#x27;s%c%.2d%c%.2d%c%.2d%.2d%.2d%.2d%.2d%.2d%.2d#&#x27;%tuple(args) global is_debug if is_debug: print(&#x27;s%c%.2d%c%.2d%c%.2d | cx_mean=%.2d cx=%.2d cy=%.2d Turn Left: %.2d | %.2d%.2d#&#x27;%tuple(args)) &#x27;&#x27;&#x27; if cx_mean &gt;= 22 and cx_mean &lt;=40 : info=&#x27;G&#x27; if cx_mean&lt;22 : info=&#x27;L&#x27; if cx_mean&gt;40 : info=&#x27;R&#x27; if is_t : info=&#x27;S&#x27; ternleft() return info#--------------ä¸²å£UARTéƒ¨åˆ† END -------------------#--------------å®šæ—¶å™¨éƒ¨åˆ† START -------------------is_need_send_data = False # æ˜¯å¦éœ€è¦å‘é€æ•°æ®çš„ä¿¡å·æ ‡å¿—def uart_time_trigger(timer): &#x27;&#x27;&#x27; ä¸²å£å‘é€æ•°æ®çš„å®šæ—¶å™¨ï¼Œå®šæ—¶å™¨çš„å›è°ƒå‡½æ•° &#x27;&#x27;&#x27; global is_need_send_data is_need_send_data = True# åˆå§‹åŒ–å®šæ—¶å™¨ é¢‘ç‡ä¸º20HZ æ¯ç§’æ‰§è¡Œ20æ¬¡tim = Timer(4, freq=20)# è®¾å®šå®šæ—¶å™¨çš„å›è°ƒå‡½æ•°tim.callback(uart_time_trigger)#--------------å®šæ—¶å™¨éƒ¨åˆ† END -------------------#--------------ç›´çº¿ä¸ç›´è§’æ£€æµ‹éƒ¨åˆ† START -------------------INTERSERCT_ANGLE_THRESHOLD = (45,90)# ç›´çº¿ç°åº¦å›¾é¢œè‰²é˜ˆå€¼LINE_COLOR_THRESHOLD = [(20, 80)]# å¦‚æœç›´çº¿æ˜¯ç™½è‰²çš„ï¼Œé˜ˆå€¼ä¿®æ”¹ä¸ºï¼š# LINE_COLOR_THRESHOLD = [(128, 255)]# å–æ ·çª—å£ROIS = &#123; &#x27;down&#x27;: (0, 55, 64, 8), # æ¨ªå‘å–æ ·-ä¸‹æ–¹ 1 &#x27;middle&#x27;: (0, 28, 64, 8), # æ¨ªå‘å–æ ·-ä¸­é—´ 2 &#x27;up&#x27;: (0, 0, 64, 8), # æ¨ªå‘å–æ ·-ä¸Šæ–¹ 3 &#x27;left&#x27;: (0, 0, 8, 64), # çºµå‘å–æ ·-å·¦ä¾§ 4 &#x27;right&#x27;: (56, 0, 8, 64) # çºµå‘å–æ ·-å³ä¾§ 5&#125;def find_blobs_in_rois(img): &#x27;&#x27;&#x27; åœ¨ROISä¸­å¯»æ‰¾è‰²å—ï¼Œè·å–ROIä¸­è‰²å—çš„ä¸­å¿ƒåŒºåŸŸä¸æ˜¯å¦æœ‰è‰²å—çš„ä¿¡æ¯ &#x27;&#x27;&#x27; global ROIS global is_debug roi_blobs_result = &#123;&#125; # åœ¨å„ä¸ªROIä¸­å¯»æ‰¾è‰²å—çš„ç»“æœè®°å½• for roi_direct in ROIS.keys(): roi_blobs_result[roi_direct] = &#123; &#x27;cx&#x27;: -1, &#x27;cy&#x27;: -1, &#x27;blob_flag&#x27;: False &#125; for roi_direct, roi in ROIS.items(): blobs=img.find_blobs(LINE_COLOR_THRESHOLD, roi=roi, merge=True, pixels_area=10) if len(blobs) == 0: continue largest_blob = max(blobs, key=lambda b: b.pixels()) x,y,width,height = largest_blob[:4] if not(width &gt;=5 and width &lt;= 15 and height &gt;= 5 and height &lt;= 15): # æ ¹æ®è‰²å—çš„å®½åº¦è¿›è¡Œè¿‡æ»¤ continue roi_blobs_result[roi_direct][&#x27;cx&#x27;] = largest_blob.cx() roi_blobs_result[roi_direct][&#x27;cy&#x27;] = largest_blob.cy() roi_blobs_result[roi_direct][&#x27;blob_flag&#x27;] = True if is_debug: img.draw_rectangle((x,y,width, height), color=(255)) return roi_blobs_resultdef visualize_result(canvas, cx_mean, cx, cy, is_turn_left, is_turn_right, is_t, is_cross): &#x27;&#x27;&#x27; å¯è§†åŒ–ç»“æœ &#x27;&#x27;&#x27; if not(is_turn_left or is_turn_right or is_t or is_cross): mid_x = int(canvas.width()/2) mid_y = int(canvas.height()/2) # ç»˜åˆ¶xçš„å‡å€¼ç‚¹ canvas.draw_circle(int(cx_mean), mid_y, 5, color=(255)) # ç»˜åˆ¶å±å¹•ä¸­å¿ƒç‚¹ canvas.draw_circle(mid_x, mid_y, 8, color=(0)) canvas.draw_line((mid_x, mid_y, int(cx_mean), mid_y), color=(255)) turn_type = &#x27;N&#x27; # å•¥è½¬è§’ä¹Ÿä¸æ˜¯ if is_t or is_cross: # åå­—å½¢æˆ–è€…Tå½¢ canvas.draw_cross(int(cx), int(cy), size=10, color=(255)) canvas.draw_circle(int(cx), int(cy), 5, color=(255)) if is_t: turn_type = &#x27;T&#x27; # Tå­—å½¢çŠ¶ elif is_cross: turn_type = &#x27;C&#x27; # åå­—å½¢ elif is_turn_left: turn_type = &#x27;L&#x27; # å·¦è½¬ elif is_turn_right: turn_type = &#x27;R&#x27; # å³è½¬ canvas.draw_string(0, 0, turn_type, color=(0))#--------------ç›´çº¿ä¸ç›´è§’æ£€æµ‹éƒ¨åˆ† END -------------------#---------------------MAIN-----------------------last_cx = 0last_cy = 0while True: if not is_need_send_data: # ä¸éœ€è¦å‘é€æ•°æ® continue is_need_send_data = False # æ‹æ‘„å›¾ç‰‡ img = sensor.snapshot() # å»é™¤å›¾åƒç•¸å˜ img.lens_corr(DISTORTION_FACTOR) # åˆ›å»ºç”»å¸ƒ # canvas = img.copy() # ä¸ºäº†IDEæ˜¾ç¤ºæ–¹ä¾¿ï¼Œç›´æ¥åœ¨ä»£ç ç»“å°¾ ç”¨IMGç»˜åˆ¶ # æ³¨æ„ï¼šæ—æ—çš„ä»£ç é‡Œ è®¡ç®—ç›´çº¿ä¹‹é—´çš„äº¤ç‚¹çš„ä»£ç æ²¡æœ‰ç”¨åˆ° lines = img.find_lines(threshold=1000, theta_margin = 50, rho_margin = 50) # å¯»æ‰¾ç›¸äº¤çš„ç‚¹ è¦æ±‚æ»¡è¶³è§’åº¦é˜ˆå€¼ intersect_pt = GeometryFeature.find_interserct_lines(lines, angle_threshold=(45,90), window_size=(IMG_WIDTH, IMG_HEIGHT)) if intersect_pt is None: # ç›´çº¿ä¸ç›´çº¿ä¹‹é—´çš„å¤¹è§’ä¸æ»¡è¶³é˜ˆå€¼èŒƒå›´ intersect_x = 0 intersect_y = 0 else: intersect_x, intersect_y = intersect_pt reslut = find_blobs_in_rois(img) # åˆ¤æ–­æ˜¯å¦éœ€è¦å·¦è½¬ä¸å³è½¬ is_turn_left = False is_turn_right = False if (not reslut[&#x27;up&#x27;][&#x27;blob_flag&#x27;] ) and reslut[&#x27;down&#x27;][&#x27;blob_flag&#x27;]: if reslut[&#x27;left&#x27;][&#x27;blob_flag&#x27;]: is_turn_left = True if reslut[&#x27;right&#x27;][&#x27;blob_flag&#x27;]: is_turn_right = True # åˆ¤æ–­æ˜¯å¦ä¸ºTå½¢çš„è½¨é“ is_t = False # åˆ¤æ–­æ˜¯å¦åå­—å½¢è½¨é“ is_cross = False cnt = 0 for roi_direct in [&#x27;up&#x27;, &#x27;down&#x27;, &#x27;left&#x27;, &#x27;right&#x27;]: if reslut[roi_direct][&#x27;blob_flag&#x27;]: cnt += 1 is_t = cnt == 3 is_cross = cnt == 4 # cx_mean ç”¨äºç¡®å®šè§†è§’ä¸­çš„è½¨é“ä¸­å¿ƒ # ç”¨äºè¡¨ç¤ºå·¦å³åç§»é‡ cx_mean = 0 for roi_direct in [&#x27;up&#x27;, &#x27;down&#x27;, &#x27;middle&#x27;]: if reslut[roi_direct][&#x27;blob_flag&#x27;]: cx_mean += reslut[roi_direct][&#x27;cx&#x27;] else: cx_mean += IMG_WIDTH / 2 cx_mean /= 3 # cx, cy åªæœ‰åœ¨Tå½¢åŒºåŸŸæ£€æµ‹å‡ºæ¥çš„æ—¶å€™æ‰æœ‰ç”¨ï¼Œ # ç”¨äºç¡®å®šè½¨é“ä¸­åœ†å½¢çš„å¤§è‡´åŒºåŸŸï¼Œ ç”¨äºå®šç‚¹ï¼Œ æ˜¯è®¡ç®—åœ†å¿ƒçš„ä¸€ç§è¿‘ä¼¼æ–¹æ³• cx = 0 cy = 0 if is_cross or is_t: # åªåœ¨å‡ºç°åå­—å½¢æˆ–è€…Tå­—å½¢æ‰è®¡ç®—åœ†å¿ƒåæ ‡ cnt = 0 for roi_direct in [&#x27;up&#x27;, &#x27;down&#x27;]: if reslut[roi_direct][&#x27;blob_flag&#x27;]: cnt += 1 cx += reslut[roi_direct][&#x27;cx&#x27;] if cnt == 0: cx = last_cx else: cx /= cnt cnt = 0 for roi_direct in [&#x27;left&#x27;, &#x27;right&#x27;]: if reslut[roi_direct][&#x27;blob_flag&#x27;]: cnt += 1 cy += reslut[roi_direct][&#x27;cy&#x27;] if cnt == 0: cy = last_cy else: cy /= cnt # ä¸ºäº†å…¼å®¹ä¹‹å‰çš„ç¨‹åºï¼ŒæŒ‰ç…§ä¹‹å‰çš„æ•°æ®é€šä¿¡åè®®å‘é€ # æ—æ—çš„ä»£ç é‡Œæ²¡æœ‰ç”¨åˆ°çš„å˜é‡å‡è®¾ä¸º 0ï¼Œ ä¸”å·¡çº¿æ¼”ç¤ºå†ç¨‹ä¸­ï¼Œåªç”¨åˆ°äº†å·¦è½¬ # å‘é€ä¿¡æ¯æ ¼å¼ï¼Œå¯ä»¥è‡ªè¡Œæ”¹é€ , ä¾‹å¦‚ æ·»åŠ  is_turn_left info = data_format_wrapper(0, 0, 0, cx_mean, cx, cy, is_turn_left, is_t, 0) uart.write(info) print(info) last_cx = cx last_cy = cy if is_debug: visualize_result(img, cx_mean, cx, cy, is_turn_left, is_turn_right, is_t, is_cross) 2.car.py12345678910111213141516171819202122232425262728293031323334353637383940414243from pyb import Pin, Timerinverse_left=False #change it to True to inverse left wheelinverse_right=False #change it to True to inverse right wheelain1 = Pin(&#x27;P0&#x27;, Pin.OUT_PP)ain2 = Pin(&#x27;P1&#x27;, Pin.OUT_PP)bin1 = Pin(&#x27;P2&#x27;, Pin.OUT_PP)bin2 = Pin(&#x27;P3&#x27;, Pin.OUT_PP)ain1.low()ain2.low()bin1.low()bin2.low()pwma = Pin(&#x27;P7&#x27;)pwmb = Pin(&#x27;P8&#x27;)tim = Timer(4, freq=1000)ch1 = tim.channel(1, Timer.PWM, pin=pwma)ch2 = tim.channel(2, Timer.PWM, pin=pwmb)ch1.pulse_width_percent(0)ch2.pulse_width_percent(0)def run(left_speed, right_speed): if inverse_left==True: left_speed=(-left_speed) if inverse_right==True: right_speed=(-right_speed) if left_speed &lt; 0: ain1.low() ain2.high() else: ain1.high() ain2.low() ch1.pulse_width_percent(int(abs(left_speed))) if right_speed &lt; 0: bin1.low() bin2.high() else: bin1.high() bin2.low() ch2.pulse_width_percent(int(abs(right_speed))) 2.pid.py1234567891011121314151617181920212223242526272829303132333435363738394041424344454647from pyb import millisfrom math import pi, isnanclass PID: _kp = _ki = _kd = _integrator = _imax = 0 _last_error = _last_derivative = _last_t = 0 _RC = 1/(2 * pi * 20) def __init__(self, p=0, i=0, d=0, imax=0): self._kp = float(p) self._ki = float(i) self._kd = float(d) self._imax = abs(imax) self._last_derivative = float(&#x27;nan&#x27;) def get_pid(self, error, scaler): tnow = millis() dt = tnow - self._last_t output = 0 if self._last_t == 0 or dt &gt; 1000: dt = 0 self.reset_I() self._last_t = tnow delta_time = float(dt) / float(1000) output += error * self._kp if abs(self._kd) &gt; 0 and dt &gt; 0: if isnan(self._last_derivative): derivative = 0 self._last_derivative = 0 else: derivative = (error - self._last_error) / delta_time derivative = self._last_derivative + \\ ((delta_time / (self._RC + delta_time)) * \\ (derivative - self._last_derivative)) self._last_error = error self._last_derivative = derivative output += self._kd * derivative output *= scaler if abs(self._ki) &gt; 0 and dt &gt; 0: self._integrator += (error * self._ki) * scaler * delta_time if self._integrator &lt; -self._imax: self._integrator = -self._imax elif self._integrator &gt; self._imax: self._integrator = self._imax output += self._integrator return output def reset_I(self): self._integrator = 0 self._last_derivative = float(&#x27;nan&#x27;) arduino:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194#include &lt;SPI.h&gt;#include &lt;Wire.h&gt;#include &lt;Adafruit_GFX.h&gt;#include &lt;Adafruit_SSD1306.h&gt;#define OLED_RESET 4Adafruit_SSD1306 display(OLED_RESET);#if (SSD1306_LCDHEIGHT != 64)#error(&quot;Height incorrect, please fix Adafruit_SSD1306.h!&quot;);#endif#define LF1 10#define LF2 11#define RI1 6#define RI2 5#define HW1 13#define HW2 12#define RED A0#define GREEN A1#define TZOUTPUT 8int leftpwm = 255;int rightpwm = 255;int quyao = 0;char com;unsigned char continue_time = 0;void go()&#123; analogWrite(LF1, leftpwm); analogWrite(LF2, 0); analogWrite(RI1, rightpwm); analogWrite(RI2, 0);&#125;void right()&#123; analogWrite(LF1, 180); analogWrite(LF2, 0); analogWrite(RI1, 0); analogWrite(RI2, 180);&#125;void left()&#123; analogWrite(LF1, 0); analogWrite(LF2, 180); analogWrite(RI1, 180); analogWrite(RI2, 0);&#125;void back()&#123; analogWrite(LF1, 0); analogWrite(LF2, leftpwm); analogWrite(RI1, 0); analogWrite(RI2, rightpwm);&#125;void carstop()&#123; analogWrite(LF1, 0); analogWrite(LF2, 0); analogWrite(RI1, 0); analogWrite(RI2, 0);&#125;void doudong()&#123; analogWrite(LF1, 150); analogWrite(LF2, 0); analogWrite(RI1, 0); analogWrite(RI2, 150);&#125;void red()&#123; digitalWrite(RED,LOW);&#125;void green()&#123; digitalWrite(GREEN,LOW);&#125;void notlight()&#123; digitalWrite(RED,HIGH); digitalWrite(GREEN,HIGH); &#125;void palldown()&#123; analogWrite(LF1, 80); analogWrite(LF2, 0); analogWrite(RI1, 85); analogWrite(RI2, 0);&#125;void setup() &#123; // put your setup code here, to run once: Serial.begin(115200); display.begin(SSD1306_SWITCHCAPVCC, 0x3C); display.clearDisplay(); display.display(); //delay(2000); pinMode(LF1, OUTPUT); pinMode(LF2, OUTPUT); pinMode(RI1, OUTPUT); pinMode(RI2, OUTPUT); pinMode(HW1, INPUT); pinMode(HW2, INPUT); pinMode(RED, OUTPUT); pinMode(GREEN, OUTPUT); pinMode(TZOUTPUT, OUTPUT); digitalWrite(TZOUTPUT,LOW); digitalWrite(RED,HIGH); digitalWrite(GREEN,HIGH);&#125;void oledisplay()&#123; // text display tests display.clearDisplay(); display.setTextSize(1); display.setTextColor(WHITE); display.setCursor(0, 0); display.print(&quot;leftpwm:&quot;); display.println(leftpwm); display.print(&quot;rightpwm:&quot;); display.println(rightpwm); display.setTextSize(2); display.print(&quot;com:&quot;); display.println(com); display.display();&#125;void cktx()&#123; //æŒ‡ä»¤æ¥æ”¶éƒ¨åˆ† //è“ç‰™é¥æ§éƒ¨åˆ† // è¯»å–ä¸²å£å‘é€çš„ä¿¡æ¯: if (Serial.available() &gt; 0 ) &#123; char inChar; inChar = Serial.read(); if (com != inChar) &#123; // bt_rec_flag = 1; com = inChar; &#125; &#125; // else // è°ƒè¯•ç”¨ //com = &#x27;S&#x27;; switch (com) &#123; case &#x27;G&#x27;: go(); Serial.println(&quot;ç›´è¡Œ&quot;); break; case &#x27;L&#x27;: left(); Serial.println(&quot;å·¦è½¬&quot;); break; case &#x27;R&#x27;: right(); Serial.println(&quot;å³è½¬&quot;); break; case &#x27;B&#x27;: back(); Serial.println(&quot;åé€€&quot;); break; case &#x27;S&#x27;: carstop(); Serial.println(&quot;åœè½¦&quot;); break; case &#x27;1&#x27;: red(); Serial.println(&quot;RED&quot;);break; case &#x27;2&#x27;: green();Serial.println(&quot;GREEN&quot;);break; case &#x27;3&#x27;: notlight();Serial.println(&quot;ç†„ç­&quot;);break; case &#x27;H&#x27;: palldown();Serial.println(&quot;é€Ÿåº¦å‡åŠ&quot;);break; default : break; &#125; &#125;void tinzhi()&#123; if(digitalRead(HW1)==HIGH||digitalRead(HW2)==HIGH) &#123; digitalWrite(TZOUTPUT,HIGH); &#125;&#125;void loop() &#123; cktx(); tinzhi(); // Serial.println(quyao); // doudong(); //oledisplay(); //delay(10);&#125;","categories":[{"name":"æ™ºèƒ½è½¦","slug":"æ™ºèƒ½è½¦","permalink":"https://ljweb.xyz/categories/%E6%99%BA%E8%83%BD%E8%BD%A6/"}],"tags":[{"name":"OpenMv","slug":"OpenMv","permalink":"https://ljweb.xyz/tags/OpenMv/"},{"name":"diy","slug":"diy","permalink":"https://ljweb.xyz/tags/diy/"},{"name":"arduino","slug":"arduino","permalink":"https://ljweb.xyz/tags/arduino/"}]},{"title":"typoraä½¿ç”¨æ•™ç¨‹","slug":"typoraä½¿ç”¨æ•™ç¨‹","date":"2021-11-20T17:33:07.000Z","updated":"2022-02-16T14:10:43.384Z","comments":true,"path":"2021/11/20/typoraä½¿ç”¨æ•™ç¨‹/","link":"","permalink":"https://ljweb.xyz/2021/11/20/typora%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/","excerpt":"","text":"å‚è€ƒï¼šTyporaå…¥é—¨ï¼šå…¨ç½‘æœ€å…¨æ•™ç¨‹ - Hider1214 1.Typoraå¿«æ·é”®æ•´åˆ123456789101112131415Ctrl+1 ä¸€é˜¶æ ‡é¢˜ Ctrl+B å­—ä½“åŠ ç²—Ctrl+2 äºŒé˜¶æ ‡é¢˜ Ctrl+I å­—ä½“å€¾æ–œCtrl+3 ä¸‰é˜¶æ ‡é¢˜ Ctrl+U ä¸‹åˆ’çº¿Ctrl+4 å››é˜¶æ ‡é¢˜ Ctrl+Home è¿”å›Typoraé¡¶éƒ¨Ctrl+5 äº”é˜¶æ ‡é¢˜ Ctrl+End è¿”å›Typoraåº•éƒ¨Ctrl+6 å…­é˜¶æ ‡é¢˜ Ctrl+T åˆ›å»ºè¡¨æ ¼Ctrl+L é€‰ä¸­æŸå¥è¯ Ctrl+K åˆ›å»ºè¶…é“¾æ¥Ctrl+D é€‰ä¸­æŸä¸ªå•è¯ Ctrl+F æœç´¢Ctrl+E é€‰ä¸­ç›¸åŒæ ¼å¼çš„æ–‡å­— Ctrl+H æœç´¢å¹¶æ›¿æ¢Alt+Shift+5 åˆ é™¤çº¿ Ctrl+Shift+I æ’å…¥å›¾ç‰‡Ctrl+Shift+M å…¬å¼å— Ctrl+Shift+Q å¼•ç”¨Ctrl + B åŠ ç²—æ³¨ï¼šä¸€äº›å®ä½“ç¬¦å·éœ€è¦åœ¨å®ä½“ç¬¦å·ä¹‹å‰åŠ â€\\â€æ‰èƒ½å¤Ÿæ˜¾ç¤º","categories":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://ljweb.xyz/categories/%E6%95%99%E7%A8%8B/"}],"tags":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://ljweb.xyz/tags/%E6%95%99%E7%A8%8B/"},{"name":"typora","slug":"typora","permalink":"https://ljweb.xyz/tags/typora/"}]},{"title":"51å¾ªè¿¹å°è½¦","slug":"51å¾ªè¿¹å°è½¦","date":"2021-11-20T16:54:55.000Z","updated":"2022-02-16T14:10:43.384Z","comments":true,"path":"2021/11/20/51å¾ªè¿¹å°è½¦/","link":"","permalink":"https://ljweb.xyz/2021/11/20/51%E5%BE%AA%E8%BF%B9%E5%B0%8F%E8%BD%A6/","excerpt":"","text":"å‚è€ƒä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163#include &lt;reg52.h&gt;sbit LED1=P2^7;//å¤§ç¯ 0äº®sbit LED2=P2^2;sbit LF1=P0^2;//å·¦å‰ç”µæœºsbit LF2=P0^3;sbit RF1=P0^4;//å³å‰ç”µæœºsbit RF2=P0^5;sbit LB2=P0^0;//å·¦åç”µæœºsbit LB1=P0^1;sbit RB1=P0^6;//å³åç”µæœºsbit RB2=P0^7;sbit XJ1 = P2^4;//å³è¾¹çº¢å¤–ä¼ æ„Ÿå™¨çš„æ•°æ®å£sbit XJ2 = P2^5;//å·¦è¾¹çº¢å¤–ä¼ æ„Ÿå™¨çš„æ•°æ®å£sbit BZ1=P2^3;//å·¦å³é¿éšœä¼ æ„Ÿå™¨æ•°æ®å£sbit BZ2=P2^6;unsigned char zkb1 = 0;//å®šä¹‰äº†ä¸€ä¸‹å·¦è¾¹ä¸¤ä¸ªè½®çš„å ç©ºæ¯”unsigned char zkb2 = 0;//å®šä¹‰äº†ä¸€ä¸‹å³è¾¹ä¸¤ä¸ªè½®çš„å ç©ºæ¯”int t = 0;void delayms(unsigned int ms)&#123; unsigned char i=100,j; for(;ms;ms--) &#123; while(--i) &#123; j=10; while(--j); &#125; &#125;&#125;void PIT_Init()&#123; EA = 1; TMOD |= 0x01; TH0 = (65536 - 200) / 256; TL0 = (65536 - 200) % 256; ET0 = 1; TR0 = 1;&#125;void timer()interrupt 1&#123; TH0 = (65536-200)/256; TL0 = (65536-200)%256; if(t&lt;zkb1) &#123; LF1=0; LF2=1; LB1=0; LB2=1; &#125; else &#123; LF1=0; LF2=0; LB1=0; LB2=0; &#125; if(t&lt;zkb2) &#123; RF1=0; RF2=1; RB1=0; RB2=1; &#125; else &#123; RF1=0; RF2=0; RB1=0; RB2=0; &#125; t = (t + 1) %50;&#125;void run() //è·‘ç›´çº¿&#123; zkb1=7; zkb2=7;&#125;void right()&#123; zkb1=12; zkb2=0; &#125;void left()&#123; zkb1=0; zkb2=12;&#125;void stop()&#123; zkb1=0; zkb2=0;&#125;void delay(unsigned int k)&#123; unsigned int x,y; for(x=0;x&lt;k;x++) &#123; for(y=0;y&lt;200;y++); &#125;&#125;void xunji()&#123; unsigned char flag; if((XJ1==1)&amp;&amp;(XJ2==0)) &#123; flag = 0;//å·¦è¾¹æ£€æµ‹åˆ°é»‘çº¿ &#125; else if((XJ1==0)&amp;&amp;(XJ2==1)) &#123; flag = 1;//å³è¾¹æ£€æµ‹åˆ°é»‘çº¿ &#125; else if((XJ1==1)&amp;&amp;(XJ2==1)) &#123; flag = 3; &#125; else &#123; flag = 4; &#125; if((BZ1==0)||(BZ2==0)) &#123; flag = 5; &#125; switch(flag) &#123; case 0: right();delay(5);stop();LED1=1;LED2=0;delay(5);break; case 1: left();delay(5);stop(); LED1=0;LED2=1;delay(5);break; case 3: run();delay(1);stop(); LED1=1;LED2=1; delay(1);break; case 4: run();delay(1);stop(); LED1=1;LED2=1; delay(1);break; case 5: stop();delay(5);break; default: run();delay(5);stop(); LED1=1;LED2=1; delay(11);break; &#125;&#125;void main()&#123; PIT_Init(); LED1=0; LED2=0; while(1) &#123; xunji(); &#125; &#125;","categories":[{"name":"51å•ç‰‡æœº","slug":"51å•ç‰‡æœº","permalink":"https://ljweb.xyz/categories/51%E5%8D%95%E7%89%87%E6%9C%BA/"}],"tags":[{"name":"diy","slug":"diy","permalink":"https://ljweb.xyz/tags/diy/"},{"name":"51","slug":"51","permalink":"https://ljweb.xyz/tags/51/"}]},{"title":"11.9å®‰ç§‘æ˜Ÿè½¨","slug":"æ‹è¿‡çš„ä¸€äº›æ˜Ÿè½¨","date":"2021-11-19T14:58:26.000Z","updated":"2022-02-16T14:10:43.424Z","comments":true,"path":"2021/11/19/æ‹è¿‡çš„ä¸€äº›æ˜Ÿè½¨/","link":"","permalink":"https://ljweb.xyz/2021/11/19/%E6%8B%8D%E8%BF%87%E7%9A%84%E4%B8%80%E4%BA%9B%E6%98%9F%E8%BD%A8/","excerpt":"","text":"æ‹æ‘„æ—¥æœŸï¼š2021å¹´11æœˆ9æ—¥ è®¾å¤‡ï¼šNIKON Z6 å‚æ•°ï¼š15s f/5.6 24mm ISO1000","categories":[],"tags":[{"name":"æ˜Ÿè½¨","slug":"æ˜Ÿè½¨","permalink":"https://ljweb.xyz/tags/%E6%98%9F%E8%BD%A8/"}]},{"title":"Hello World!","slug":"HELLO","date":"2021-11-18T19:17:15.000Z","updated":"2022-02-16T14:10:43.384Z","comments":true,"path":"2021/11/18/HELLO/","link":"","permalink":"https://ljweb.xyz/2021/11/18/HELLO/","excerpt":"","text":"å„ç§è¯­è¨€çš„Hello World1.Cè¯­è¨€ 123456#include &lt;stdio.h&gt;void mian()&#123; printf(&quot;Hello World!&quot;);&#125; 2.python 1print(&quot;Hello World!&quot;)","categories":[],"tags":[]}],"categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://ljweb.xyz/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"51å•ç‰‡æœº","slug":"51å•ç‰‡æœº","permalink":"https://ljweb.xyz/categories/51%E5%8D%95%E7%89%87%E6%9C%BA/"},{"name":"æ¬è¿","slug":"æ¬è¿","permalink":"https://ljweb.xyz/categories/%E6%90%AC%E8%BF%90/"},{"name":"æ™ºèƒ½è½¦","slug":"æ™ºèƒ½è½¦","permalink":"https://ljweb.xyz/categories/%E6%99%BA%E8%83%BD%E8%BD%A6/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://ljweb.xyz/categories/%E6%95%99%E7%A8%8B/"},{"name":"arduino","slug":"arduino","permalink":"https://ljweb.xyz/categories/arduino/"}],"tags":[{"name":"51å•ç‰‡æœº","slug":"51å•ç‰‡æœº","permalink":"https://ljweb.xyz/tags/51%E5%8D%95%E7%89%87%E6%9C%BA/"},{"name":"OpenMv","slug":"OpenMv","permalink":"https://ljweb.xyz/tags/OpenMv/"},{"name":"51","slug":"51","permalink":"https://ljweb.xyz/tags/51/"},{"name":"å®éªŒ","slug":"å®éªŒ","permalink":"https://ljweb.xyz/tags/%E5%AE%9E%E9%AA%8C/"},{"name":"diy","slug":"diy","permalink":"https://ljweb.xyz/tags/diy/"},{"name":"ç”µè·¯","slug":"ç”µè·¯","permalink":"https://ljweb.xyz/tags/%E7%94%B5%E8%B7%AF/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://ljweb.xyz/tags/%E6%95%99%E7%A8%8B/"},{"name":"git","slug":"git","permalink":"https://ljweb.xyz/tags/git/"},{"name":"typora","slug":"typora","permalink":"https://ljweb.xyz/tags/typora/"},{"name":"arduino","slug":"arduino","permalink":"https://ljweb.xyz/tags/arduino/"},{"name":"Cè¯­è¨€","slug":"Cè¯­è¨€","permalink":"https://ljweb.xyz/tags/C%E8%AF%AD%E8%A8%80/"},{"name":"æ˜Ÿè½¨","slug":"æ˜Ÿè½¨","permalink":"https://ljweb.xyz/tags/%E6%98%9F%E8%BD%A8/"}]}